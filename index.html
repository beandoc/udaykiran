<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-en="Uday Kiran - Your Journey to Freedom" data-hi="उदय किरण - स्वतंत्रता की आपकी यात्रा" data-mr="उदय किरण - तुमचा स्वातंत्र्याचा प्रवास">Uday Kiran - Your Journey to Freedom</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --primary-color: #0D9488; /* Teal */
            --primary-color-dark: #0A7D7E;
            --secondary-color: #f59e0b; /* Amber for highlights */
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --bg-light: #f9fafb;
            --bg-card: #ffffff;
            --border-color: #e5e7eb;
            --danger-color: #ef4444;
            --warning-color: #f97316;
            --success-color: #22c55e;
            --info-color: #3b82f6;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top to prevent vertical centering issues */
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            width: 100%;
            max-width: 600px;
            background-color: var(--bg-light);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.05);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .card-container {
            background-color: var(--bg-card);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            display: none; /* Hidden by default */
            flex-direction: column;
            align-items: center;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            overflow-y: auto; /* Enable scrolling for content that overflows */
            padding-bottom: 80px; /* Space for fixed buttons if any */
        }
        
        .card-container.current-screen {
            display: flex;
            opacity: 1;
            transform: translateY(0);
            position: relative; /* Take up space in the flow */
        }

        .header {
            background-color: var(--primary-color);
            color: white;
            padding: 24px;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            box-sizing: border-box;
        }

        .section-header {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 8px;
            margin-top: 16px;
        }

        .section-subheader {
            font-size: 1rem;
            color: var(--text-light);
            margin-bottom: 24px;
        }

        .app-button-primary {
            background-color: var(--primary-color);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .app-button-primary:hover {
            background-color: var(--primary-color-dark);
        }

        .app-button-secondary {
            background-color: transparent;
            color: var(--primary-color);
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid var(--primary-color);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .app-button-secondary:hover {
            background-color: var(--primary-color);
            color: white;
        }
        .app-button-back {
            background-color: var(--text-light);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .app-button-back:hover {
            background-color: #5a6370;
        }

        .app-button-danger {
            background-color: var(--danger-color);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 20px;
        }
        .app-button-danger:hover {
            background-color: #dc2626;
        }

        .input-group {
            margin-bottom: 20px;
            width: 100%;
            max-width: 400px;
            text-align: left;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-dark);
        }

        .input-group input[type="date"],
        .input-group input[type="number"],
        .input-group input[type="text"],
        .input-group input[type="email"],
        .input-group input[type="tel"],
        .input-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            box-sizing: border-box;
            color: var(--text-dark);
            background-color: var(--bg-light);
        }

        .button-group {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 16px;
            margin-top: 32px;
            width: 100%;
        }

        .language-switcher {
            display: flex;
            gap: 10px;
        }

        .lang-button {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s ease;
        }

        .lang-button.active, .lang-button:hover {
            background-color: rgba(255, 255, 255, 0.4);
        }

        .stepper-container {
            display: flex;
            justify-content: space-around;
            width: 100%;
            max-width: 300px;
            margin-bottom: 20px;
            position: relative;
            padding: 10px 0;
        }

        .stepper-container::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background-color: var(--border-color);
            transform: translateY(-50%);
            z-index: 0;
        }

        .step-circle {
            width: 30px;
            height: 30px;
            background-color: var(--border-color);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 600;
            color: white;
            z-index: 1;
            transition: background-color 0.3s ease, border-color 0.3s ease;
            border: 2px solid var(--border-color);
        }

        .step-circle.active {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        .step-circle.completed {
            background-color: var(--success-color);
            border-color: var(--success-color);
        }
        
        .answer-options, .motivation-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
            max-width: 400px;
            margin-top: 20px;
        }

        .answer-option, .motivation-option {
            background-color: var(--bg-light);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 14px 20px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-dark);
            font-weight: 500;
        }

        .answer-option:hover, .motivation-option:hover {
            background-color: #edf2f7;
            border-color: var(--primary-color);
        }

        .answer-option.selected, .motivation-option.selected {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .answer-option.selected:hover, .motivation-option.selected:hover {
            background-color: var(--primary-color-dark);
            border-color: var(--primary-color-dark);
        }

        .result-box {
            background-color: #ecfdf5; /* Light green */
            border: 1px solid #a7f3d0; /* Green border */
            border-radius: 8px;
            padding: 16px;
            margin-top: 20px;
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        .result-box .level {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color-dark);
            margin-bottom: 8px;
        }
        .result-box .advice {
            font-size: 0.95rem;
            color: var(--text-dark);
        }
        .result-box .score {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-top: 10px;
        }

        .health-card {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 15px;
            text-align: left;
            margin-bottom: 15px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.03);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .health-card i {
            font-size: 1.8rem;
            color: var(--primary-color);
        }
        .health-card-content h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color-dark);
            margin-bottom: 5px;
        }
        .health-card-content p {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .scrollable-content-area {
            max-height: 250px; /* Max height for scrollable content */
            overflow-y: auto; /* Enable vertical scrolling */
            width: 100%;
            padding: 10px; /* Padding inside the scrollable area */
            border: 1px solid var(--border-color); /* Optional: a border to indicate scrollable area */
            border-radius: 8px;
            background-color: #fcfcfc;
        }
        
        /* Table styles for NRT Guidelines */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid var(--border-color);
            padding: 12px;
            text-align: left;
            vertical-align: top;
        }

        th {
            background-color: var(--bg-light);
            font-weight: 600;
            color: var(--primary-color-dark);
        }

        tbody tr:nth-child(even) {
            background-color: #f9fafb; /* Light stripe for readability */
        }
        .list-item {
            background-color: #fff;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            box-sizing: border-box;
        }
        .list-item-content {
            flex-grow: 1;
            text-align: left;
        }
        .list-item-content strong {
            display: block;
            font-size: 1rem;
            color: var(--primary-color-dark);
            margin-bottom: 4px;
        }
        .list-item-content span {
            font-size: 0.9rem;
            color: var(--text-light);
        }
        .list-item-remove {
            background: none;
            border: none;
            color: var(--danger-color);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: background-color 0.2s ease;
        }
        .list-item-remove:hover {
            background-color: rgba(239, 68, 68, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <span data-en="Uday Kiran" data-hi="उदय किरण" data-mr="उदय किरण">Uday Kiran</span>
            <div class="language-switcher">
                <button class="lang-button active" data-lang="en">EN</button>
                <button class="lang-button" data-lang="hi">HI</button>
                <button class="lang-button" data-lang="mr">MR</button>
            </div>
        </div>

        <div id="welcomeScreen" class="card-container current-screen">
            <h2 class="section-header" data-en="Your Journey to Freedom Starts Here" data-hi="स्वतंत्रता की आपकी यात्रा यहीं से शुरू होती है" data-mr="तुमचा स्वातंत्र्याचा प्रवास इथेच सुरू होतो">Your Journey to Freedom Starts Here</h2>
            <p class="section-subheader" data-en="Empowering you to quit tobacco for a healthier, happier life." data-hi="आपको स्वस्थ, खुशहाल जीवन के लिए तंबाकू छोड़ने के लिए सशक्त बनाना।" data-mr="निरोगी, आनंदी जीवनासाठी तुम्हाला तंबाखू सोडण्यासाठी सक्षम करणे.">Empowering you to quit tobacco for a healthier, happier life.</p>
            <div class="button-group">
                <button class="app-button-primary" onclick="showScreen('quitDecisionScreen')"><span data-en="Start My Journey" data-hi="मेरी यात्रा शुरू करें" data-mr="माझा प्रवास सुरू करा">Start My Journey</span> <i class="fa-solid fa-arrow-right"></i></button>
            </div>
        </div>

        <div id="quitDecisionScreen" class="card-container">
            <h2 class="section-header" data-en="Ready to Quit?" data-hi="छोड़ने के लिए तैयार हैं?" data-mr="सोडण्यासाठी तयार आहात?">Ready to Quit?</h2>
            <p class="section-subheader" data-en="Set your quit date and take the first step towards a smoke-free life." data-hi="अपनी छोड़ने की तारीख निर्धारित करें और धूम्रपान मुक्त जीवन की ओर पहला कदम उठाएं।" data-mr="तुमची सोडण्याची तारीख निश्चित करा आणि धूम्रपानमुक्त जीवनाकडे पहिले पाऊल टाका.">Set your quit date and take the first step towards a smoke-free life.</p>
            
            <div class="input-group">
                <label for="quitDateInput" data-en="My Quit Date:" data-hi="मेरी छोड़ने की तारीख:" data-mr="माझी सोडण्याची तारीख:">My Quit Date:</label>
                <input type="date" id="quitDateInput">
            </div>
            
            <div class="button-group">
                <button class="app-button-back" onclick="showScreen('welcomeScreen')"><i class="fa-solid fa-arrow-left"></i> <span data-en="Back" data-hi="पीछे" data-mr="मागे">Back</span></button>
                <button class="app-button-primary" onclick="setQuitDate()"><span data-en="Confirm Date" data-hi="तारीख की पुष्टि करें" data-mr="तारीख निश्चित करा">Confirm Date</span> <i class="fa-solid fa-check"></i></button>
            </div>
        </div>

        <div id="goalsMotivationsScreen" class="card-container">
            <h2 class="section-header" data-en="Set Your Goals & Motivations" data-hi="अपने लक्ष्य और प्रेरणाएँ निर्धारित करें" data-mr="तुमची ध्येये आणि प्रेरणा निश्चित करा">Set Your Goals & Motivations</h2>
            <p class="section-subheader" data-en="What are your reasons and goals for quitting tobacco?" data-hi="तंबाकू छोड़ने के आपके क्या कारण और लक्ष्य हैं?" data-mr="तंबाखू सोडण्याची तुमची कारणे आणि ध्येये काय आहेत?">What are your reasons and goals for quitting tobacco?</p>
            
            <div class="input-group">
                <label for="mainGoalInput" data-en="My main goal is..." data-hi="मेरा मुख्य लक्ष्य है..." data-mr="माझे मुख्य ध्येय आहे...">My main goal is...</label>
                <input type="text" id="mainGoalInput">
            </div>

            <p class="section-subheader" data-en="My motivations (select all that apply):" data-hi="मेरी प्रेरणाएँ (सभी लागू होने वाले चुनें):" data-mr="माझ्या प्रेरणा (लागू होणारे सर्व निवडा):">My motivations (select all that apply):</p>
            <div id="motivationOptions" class="motivation-options">
                <div class="motivation-option" data-motivation="Improved Health" onclick="toggleMotivation('Improved Health')"><span data-en="Improved Health" data-hi="बेहतर स्वास्थ्य" data-mr="सुधारलेले आरोग्य">Improved Health</span></div>
                <div class="motivation-option" data-motivation="For my Family" onclick="toggleMotivation('For my Family')"><span data-en="For my Family" data-hi="मेरे परिवार के लिए" data-mr="माझ्या कुटुंबासाठी">For my Family</span></div>
                <div class="motivation-option" data-motivation="Financial Savings" onclick="toggleMotivation('Financial Savings')"><span data-en="Financial Savings" data-hi="वित्तीय बचत" data-mr="आर्थिक बचत">Financial Savings</span></div>
                <div class="motivation-option" data-motivation="Freedom from Addiction" onclick="toggleMotivation('Freedom from Addiction')"><span data-en="Freedom from Addiction" data-hi="लत से आजादी" data-mr="व्यसनापासून मुक्ती">Freedom from Addiction</span></div>
                <div class="motivation-option" data-motivation="To be a Role Model" onclick="toggleMotivation('To be a Role Model')"><span data-en="To be a Role Model" data-hi="एक आदर्श बनने के लिए" data-mr="एक आदर्श बनण्यासाठी">To be a Role Model</span></div>
                <div class="motivation-option" data-motivation="Better Smell/Taste" onclick="toggleMotivation('Better Smell/Taste')"><span data-en="Better Smell/Taste" data-hi="बेहतर गंध/स्वाद" data-mr="चांगली वास/चव">Better Smell/Taste</span></div>
            </div>
            <div class="input-group mt-4">
                <label for="otherMotivationsInput" data-en="Other motivations (optional):" data-hi="अन्य प्रेरणाएँ (वैकल्पिक):" data-mr="इतर प्रेरणा (ऐच्छिक):">Other motivations (optional):</label>
                <textarea id="otherMotivationsInput" rows="2" class="w-full"></textarea>
            </div>

            <div class="button-group">
                <button class="app-button-back" onclick="showScreen('quitDecisionScreen')"><i class="fa-solid fa-arrow-left"></i> <span data-en="Back" data-hi="पीछे" data-mr="मागे">Back</span></button>
                <button class="app-button-primary" onclick="saveGoalsMotivations()"><span data-en="Next" data-hi="अगला" data-mr="पुढील">Next</span> <i class="fa-solid fa-arrow-right"></i></button>
            </div>
        </div>

        <div id="supportSystemScreen" class="card-container">
            <h2 class="section-header" data-en="Your Support System" data-hi="आपका समर्थन प्रणाली" data-mr="तुमची समर्थन प्रणाली">Your Support System</h2>
            <p class="section-subheader" data-en="Nominate friends or family who can help you in tough times. This is optional and you can skip it." data-hi="उन दोस्तों या परिवार के सदस्यों को नामित करें जो मुश्किल समय में आपकी मदद कर सकते हैं। यह वैकल्पिक है और आप इसे छोड़ सकते हैं।" data-mr="कठीण काळात तुम्हाला मदत करू शकणारे मित्र किंवा कुटुंबातील सदस्यांना नामांकित करा. हे ऐच्छिक आहे आणि तुम्ही ते वगळू शकता.">Nominate friends or family who can help you in tough times. This is optional and you can skip it.</p>
            
            <div class="input-group">
                <label for="supporterNameInput" data-en="Supporter's Name" data-hi="समर्थक का नाम" data-mr="समर्थकाचे नाव">Supporter's Name</label>
                <input type="text" id="supporterNameInput">
            </div>
            <div class="input-group">
                <label for="supporterContactInput" data-en="Contact (Phone/Email - optional)" data-hi="संपर्क (फोन/ईमेल - वैकल्पिक)" data-mr="संपर्क (फोन/ईमेल - ऐच्छिक)">Contact (Phone/Email - optional)</label>
                <input type="text" id="supporterContactInput">
            </div>
            <button class="app-button-secondary" onclick="addSupporter()"><i class="fa-solid fa-user-plus"></i> <span data-en="Add Supporter" data-hi="समर्थक जोड़ें" data-mr="समर्थक जोडा">Add Supporter</span></button>

            <div id="supportersList" class="scrollable-content-area mt-6 w-full max-w-md">
                <div class="text-gray-500" id="noSupportersMessage" data-en="No supporters added yet." data-hi="अभी तक कोई समर्थक नहीं जोड़ा गया है।" data-mr="अद्याप कोणताही समर्थक जोडलेला नाही.">No supporters added yet.</div>
            </div>

            <div class="button-group">
                <button class="app-button-back" onclick="showScreen('goalsMotivationsScreen')"><i class="fa-solid fa-arrow-left"></i> <span data-en="Back" data-hi="पीछे" data-mr="मागे">Back</span></button>
                <button class="app-button-primary" onclick="showScreen('congratulationsScreen')"><span data-en="Next" data-hi="अगला" data-mr="पुढील">Next</span> <i class="fa-solid fa-arrow-right"></i></button>
                <button class="app-button-secondary" onclick="showScreen('congratulationsScreen')"><span data-en="Skip" data-hi="छोड़ें" data-mr="वगळा">Skip</span></button>
            </div>
        </div>

        <div id="congratulationsScreen" class="card-container">
            <i class="fa-solid fa-champagne-glasses text-teal-600 text-6xl mb-4"></i>
            <h2 class="section-header" data-en="Congratulations!" data-hi="बधाई हो!" data-mr="अभिनंदन!">Congratulations!</h2>
            <p class="section-subheader" data-en="You've set your quit date! Your journey to a healthier life begins now." data-hi="आपने अपनी छोड़ने की तारीख निर्धारित कर ली है! स्वस्थ जीवन की आपकी यात्रा अब शुरू होती है।" data-mr="तुम्ही तुमची सोडण्याची तारीख निश्चित केली आहे! निरोगी जीवनाकडे तुमचा प्रवास आता सुरू होतो.">You've set your quit date! Your journey to a healthier life begins now.</p>
            <div class="button-group">
                <button class="app-button-primary" onclick="showScreen('fagerstromTest')"><span data-en="Assess My Dependence" data-hi="मेरी निर्भरता का आकलन करें" data-mr="माझे अवलंबित्व तपासा">Assess My Dependence</span> <i class="fa-solid fa-vials"></i></button>
            </div>
        </div>

        <div id="fagerstromTest" class="card-container">
            <div id="fagerstromStepper" class="stepper-container"></div>
            <h2 class="section-header" data-en="Fagerström Test for Nicotine Dependence" data-hi="निकोटीन निर्भरता के लिए फेगरस्ट्रॉम टेस्ट" data-mr="निकोटीन अवलंबित्व तपासणीसाठी फागेरस्ट्रॉम टेस्ट">Fagerström Test for Nicotine Dependence</h2>
            <p class="section-subheader" data-en="Answer these questions to understand your nicotine dependence level." data-hi="अपने निकोटीन निर्भरता स्तर को समझने के लिए इन प्रश्नों का उत्तर दें।" data-mr="तुमच्या निकोटीन अवलंबित्व पातळी समजून घेण्यासाठी या प्रश्नांची उत्तरे द्या.">Answer these questions to understand your nicotine dependence level.</p>
            
            <div class="question-area text-left w-full max-w-md">
                <p id="fagerstromQuestion" class="text-lg font-medium text-gray-800 mb-4"></p>
                <div id="fagerstromOptions" class="answer-options"></div>
            </div>

            <div id="fagerstromNav" class="button-group">
                <button class="app-button-back" onclick="prevFagerstromQuestion()" id="fagerstromPrevBtn" style="display:none;"><i class="fa-solid fa-arrow-left"></i> <span data-en="Previous" data-hi="पिछला" data-mr="मागील">Previous</span></button>
                <button class="app-button-primary" onclick="nextFagerstromQuestion()" id="fagerstromNextBtn" style="display:none;"><span data-en="Next" data-hi="अगला" data-mr="पुढील">Next</span> <i class="fa-solid fa-arrow-right"></i></button>
                <button class="app-button-primary" onclick="calculateFagerstromScore()" id="fagerstromSubmitBtn" style="display:none;"><span data-en="Submit" data-hi="जमा करें" data-mr="सादर करा">Submit</span> <i class="fa-solid fa-paper-plane"></i></button>
            </div>
        </div>

        <div id="healthOverviewScreen" class="card-container">
            <h2 class="section-header" data-en="Your Health Overview" data-hi="आपका स्वास्थ्य अवलोकन" data-mr="तुमचे आरोग्य विहंगावलोकन">Your Health Overview</h2>
            <p class="section-subheader" data-en="Understanding your dependence helps tailor your quit plan." data-hi="अपनी निर्भरता को समझना आपकी छोड़ने की योजना को तैयार करने में मदद करता है।" data-mr="तुमचे अवलंबित्व समजून घेतल्याने तुमची सोडण्याची योजना तयार करण्यास मदत होते.">Understanding your dependence helps tailor your quit plan.</p>
            
            <div class="result-box">
                <div class="level" id="dependenceLevelDisplay"></div>
                <div class="advice" id="dependenceAdvice"></div>
                <div class="score" id="fagerstromScoreDisplay"></div>
            </div>

            <div class="health-card">
                <i class="fa-solid fa-lungs"></i>
                <div class="health-card-content">
                    <h3 data-en="Lung Health" data-hi="फेफड़ों का स्वास्थ्य" data-mr="फुफ्फुसांचे आरोग्य">Lung Health</h3>
                    <p data-en="Your lungs will start to heal and function better." data-hi="आपके फेफड़े ठीक होने लगेंगे और बेहतर काम करेंगे।" data-mr="तुमची फुफ्फुसे बरी होऊ लागतील आणि अधिक चांगले कार्य करतील.">Your lungs will start to heal and function better.</p>
                </div>
            </div>
            <div class="health-card">
                <i class="fa-solid fa-heart"></i>
                <div class="health-card-content">
                    <h3 data-en="Cardiovascular Health" data-hi="हृदय स्वास्थ्य" data-mr="हृदयाचे आरोग्य">Cardiovascular Health</h3>
                    <p data-en="Reduced risk of heart disease and stroke." data-hi="हृदय रोग और स्ट्रोक का जोखिम कम होगा।" data-mr="हृदयविकार आणि स्ट्रोकचा धोका कमी होईल.">Reduced risk of heart disease and stroke.</p>
                </div>
            </div>
            <div class="health-card">
                <i class="fa-solid fa-brain"></i>
                <div class="health-card-content">
                    <h3 data-en="Mental Well-being" data-hi="मानसिक स्वास्थ्य" data-mr="मानसिक आरोग्य">Mental Well-being</h3>
                    <p data-en="Improved mood and reduced anxiety over time." data-hi="समय के साथ बेहतर मूड और कम चिंता।" data-mr="कालांतराने सुधारलेला मूड आणि कमी झालेली चिंता.">Improved mood and reduced anxiety over time.</p>
                </div>
            </div>

            <div class="button-group">
                <button class="app-button-back" onclick="showScreen('fagerstromTest')"><i class="fa-solid fa-arrow-left"></i> <span data-en="Retake Test" data-hi="टेस्ट फिर से दें" data-mr="चाचणी पुन्हा द्या">Retake Test</span></button>
                <button class="app-button-primary" onclick="showScreen('dangerTimesCravingsScreen')"><span data-en="Next" data-hi="अगला" data-mr="पुढील">Next</span> <i class="fa-solid fa-arrow-right"></i></button>
            </div>
        </div>

        <div id="dangerTimesCravingsScreen" class="card-container">
            <h2 class="section-header" data-en="Manage Danger Times & Cravings" data-hi="खतरनाक समय और लालसा का प्रबंधन करें" data-mr="धोक्याचे वेळा आणि लालसा व्यवस्थापित करा">Manage Danger Times & Cravings</h2>
            <p class="section-subheader" data-en="Identify your 'Danger Times' when cravings are strongest. We'll help you distract yourself!" data-hi="अपने 'खतरनाक समय' की पहचान करें जब लालसा सबसे मजबूत होती है। हम आपको खुद को विचलित करने में मदद करेंगे!" data-mr="तुमच्या 'धोक्याच्या वेळा' ओळखा जेव्हा लालसा सर्वात मजबूत असते. आम्ही तुम्हाला स्वतःला विचलित करण्यात मदत करू!">Identify your 'Danger Times' when cravings are strongest. We'll help you distract yourself!</p>
            
            <div class="input-group">
                <label for="dangerTimeInput" data-en="Nominate a Danger Time" data-hi="एक खतरनाक समय नामित करें" data-mr="एक धोक्याची वेळ नामांकित करा">Nominate a Danger Time</label>
                <input type="text" id="dangerTimeInput" placeholder="e.g., After morning coffee, During stress">
            </div>
            <button class="app-button-secondary" onclick="addDangerTime()"><i class="fa-solid fa-plus-circle"></i> <span data-en="Add Danger Time" data-hi="खतरनाक समय जोड़ें" data-mr="धोक्याची वेळ जोडा">Add Danger Time</span></button>

            <div id="dangerTimesList" class="scrollable-content-area mt-6 w-full max-w-md">
                <div class="text-gray-500" id="noDangerTimesMessage" data-en="No danger times added yet." data-hi="अभी तक कोई खतरनाक समय नहीं जोड़ा गया है।" data-mr="अद्याप कोणतीही धोक्याची वेळ जोडलेली नाही.">No danger times added yet.</div>
            </div>

            <p class="section-subheader mt-6" data-en="Distraction Ideas" data-hi="विचलित करने वाले विचार" data-mr="विचलित करणारे विचार">Distraction Ideas</p>
            <div id="distractionIdea" class="result-box w-full max-w-md">
                <p data-en="Stretch for a few minutes, focusing on the sensations in your body." data-hi="कुछ मिनटों के लिए स्ट्रेच करें, अपने शरीर में संवेदनाओं पर ध्यान केंद्रित करें।" data-mr="काही मिनिटे स्ट्रेच करा, तुमच्या शरीरातील संवेदनांवर लक्ष केंद्रित करा.">Stretch for a few minutes, focusing on the sensations in your body.</p>
            </div>
            <button class="app-button-secondary mt-4" onclick="getNewDistractionIdea()"><span data-en="Get Another Idea" data-hi="एक और विचार प्राप्त करें" data-mr="दुसरी कल्पना मिळवा">Get Another Idea</span> <i class="fa-solid fa-lightbulb"></i></button>

            <p class="section-subheader mt-6" data-en="Reminder Service" data-hi="अनुस्मारक सेवा" data-mr="स्मरणपत्र सेवा">Reminder Service</p>
            <p class="text-sm text-gray-600 mb-4" data-en="Opt-in for timely reminders to help you fight cravings and stay tobacco-free." data-hi="लालसा से लड़ने और तंबाकू मुक्त रहने में आपकी मदद करने के लिए समय पर अनुस्मारक प्राप्त करने का विकल्प चुनें।" data-mr="लालसांना सामोरे जाण्यासाठी आणि तंबाखूमुक्त राहण्यासाठी वेळेवर स्मरणपत्रे मिळवा.">Opt-in for timely reminders to help you fight cravings and stay tobacco-free.</p>
            
            <div class="input-group">
                <label for="emailReminderInput" data-en="Your Email" data-hi="आपका ईमेल" data-mr="तुमचा ईमेल">Email Reminders</label>
                <input type="email" id="emailReminderInput" placeholder="your.email@example.com">
            </div>
            <div class="input-group">
                <label for="phoneReminderInput" data-en="Your Phone Number" data-hi="आपका फ़ोन नंबर" data-mr="तुमचा फोन नंबर">SMS Reminders</label>
                <input type="tel" id="phoneReminderInput" placeholder="+91 1234567890">
            </div>
            <button class="app-button-primary" onclick="saveReminderPreferences()"><span data-en="Save Preferences" data-hi="वरीयताएँ सहेजें" data-mr="पसंती जतन करा">Save Preferences</span> <i class="fa-solid fa-save"></i></button>

            <div class="button-group">
                <button class="app-button-back" onclick="showScreen('healthOverviewScreen')"><i class="fa-solid fa-arrow-left"></i> <span data-en="Health Overview" data-hi="स्वास्थ्य अवलोकन" data-mr="आरोग्य विहंगावलोकन">Health Overview</span></button>
                <button class="app-button-primary" onclick="showScreen('dailyFocusScreen')"><span data-en="Daily Focus" data-hi="दैनिक ध्यान" data-mr="दैनिक लक्ष">Daily Focus</span> <i class="fa-solid fa-calendar-day"></i></button>
            </div>
        </div>

        <div id="dailyFocusScreen" class="card-container">
            <h2 class="section-header" data-en="Daily Focus" data-hi="दैनिक ध्यान" data-mr="दैनिक लक्ष">Daily Focus</h2>
            <p class="section-subheader" data-en="For today, here's a specific focus or challenge to help you on your journey to quit tobacco." data-hi="आज के लिए, तंबाकू छोड़ने की आपकी यात्रा में मदद करने के लिए यहाँ एक विशिष्ट ध्यान या चुनौती है।" data-mr="आजसाठी, तंबाखू सोडण्याच्या तुमच्या प्रवासात मदत करण्यासाठी येथे एक विशिष्ट लक्ष किंवा आव्हान आहे.">For today, here's a specific focus or challenge to help you on your journey to quit tobacco.</p>
            
            <div class="input-group">
                <label for="cigarettesSmokedYesterday" data-en="How many cigarettes did you smoke yesterday?" data-hi="कल आपने कितनी सिगरेट पीं?" data-mr="काल तुम्ही किती सिगारेट प्यायलात?">How many cigarettes did you smoke yesterday?</label>
                <input type="number" id="cigarettesSmokedYesterday" min="0" value="0">
            </div>
            <button class="app-button-primary" onclick="generateDailyFocus()"><span data-en="Generate Today's Focus" data-hi="आज का ध्यान उत्पन्न करें" data-mr="आजचे लक्ष निर्माण करा">Generate Today's Focus</span> <i class="fa-solid fa-lightbulb"></i></button>
            
            <div id="dailyFocusDisplay" class="result-box mt-6 w-full max-w-md" style="display: none;">
                <p class="text-base" id="focusText"></p>
            </div>

            <div class="button-group">
                <button class="app-button-back" onclick="showScreen('dangerTimesCravingsScreen')"><i class="fa-solid fa-arrow-left"></i> <span data-en="Cravings" data-hi="लालसा" data-mr="लालसा">Cravings</span></button>
                <button class="app-button-primary" onclick="showScreen('supportResourcesScreen')"><span data-en="Support Resources" data-hi="समर्थन संसाधन" data-mr="समर्थन संसाधने">Support Resources</span> <i class="fa-solid fa-hand-holding-heart"></i></button>
            </div>
        </div>

        <div id="supportResourcesScreen" class="card-container">
            <h2 class="section-header" data-en="Support Resources" data-hi="समर्थन संसाधन" data-mr="समर्थन संसाधने">Support Resources</h2>
            <p class="section-subheader" data-en="Here are personalized recommendations and resources to support you on your path to a tobacco-free life." data-hi="यहाँ तंबाकू मुक्त जीवन के आपके मार्ग पर आपका समर्थन करने के लिए व्यक्तिगत सिफारिशें और संसाधन हैं।" data-mr="येथे तंबाखूमुक्त जीवनाच्या तुमच्या मार्गावर तुम्हाला मदत करण्यासाठी वैयक्तिक शिफारसी आणि संसाधने आहेत.">Here are personalized recommendations and resources to support you on your path to a tobacco-free life.</p>
            
            <div class="health-card">
                <i class="fa-solid fa-pills"></i>
                <div class="health-card-content">
                    <h3 data-en="NRT Recommendations:" data-hi="एनआरटी सिफारिशें:" data-mr="एनआरटी शिफारसी:">NRT Recommendations:</h3>
                    <p id="nrtRecommendationsText" data-en="Given your high dependence, NRTs are highly recommended. Discuss with your doctor patches, gum, lozenges, or inhalers, and consider combination therapy for better results. See full guidelines for dosages." data-hi="आपकी उच्च निर्भरता को देखते हुए, एनआरटी की अत्यधिक अनुशंसा की जाती है। अपने डॉक्टर से पैच, गम, लोजेंज, या इनहेलर के बारे में चर्चा करें, और बेहतर परिणामों के लिए संयोजन थेरेपी पर विचार करें। खुराक के लिए पूर्ण दिशानिर्देश देखें।" data-mr="तुमच्या उच्च अवलंबित्वानुसार, एनआरटीची अत्यंत शिफारस केली जाते. तुमच्या डॉक्टरांशी पॅचेस, गम, लोजेंज किंवा इनहेलरबद्दल चर्चा करा आणि चांगल्या परिणामांसाठी संयोजन थेरपीचा विचार करा. डोससाठी पूर्ण मार्गदर्शक तत्त्वे पहा.">Given your high dependence, NRTs are highly recommended. Discuss with your doctor patches, gum, lozenges, or inhalers, and consider combination therapy for better results. See full guidelines for dosages.</p>
                    <button class="app-button-secondary mt-2" onclick="showScreen('nrtGuidelinesScreen')"><span data-en="View Full NRT Guidelines" data-hi="पूर्ण एनआरटी दिशानिर्देश देखें" data-mr="पूर्ण एनआरटी मार्गदर्शक तत्त्वे पहा">View Full NRT Guidelines</span> <i class="fa-solid fa-info-circle"></i></button>
                </div>
            </div>

            <div class="health-card">
                <i class="fa-solid fa-dumbbell"></i>
                <div class="health-card-content">
                    <h3 data-en="Physical Well-being Exercises:" data-hi="शारीरिक कल्याण व्यायाम:" data-mr="शारीरिक कल्याण व्यायाम:">Physical Well-being Exercises:</h3>
                    <p data-en="Engage in light physical activity such as walking for 30 minutes daily. Deep breathing exercises (diaphragmatic breathing) can significantly improve lung capacity and reduce stress. Consider yoga or stretching for flexibility." data-hi="प्रतिदिन 30 मिनट तक टहलने जैसे हल्के शारीरिक गतिविधि में संलग्न रहें। गहरी साँस लेने के व्यायाम (डायाफ्रामिक श्वास) फेफड़ों की क्षमता में काफी सुधार कर सकते हैं और तनाव को कम कर सकते हैं। लचीलेपन के लिए योग या स्ट्रेचिंग पर विचार करें।" data-mr="दररोज 30 मिनिटे चालणे यांसारख्या हलक्या शारीरिक हालचाली करा. खोल श्वासोच्छ्वास व्यायाम (डायाफ्रामिक श्वास) फुफ्फुसांची क्षमता लक्षणीयरीत्या सुधारू शकतात आणि ताण कमी करू शकतात. लवचिकतेसाठी योग किंवा स्ट्रेचिंगचा विचार करा.">Engage in light physical activity such as walking for 30 minutes daily. Deep breathing exercises (diaphragmatic breathing) can significantly improve lung capacity and reduce stress. Consider yoga or stretching for flexibility.</p>
                </div>
            </div>

            <div class="health-card">
                <i class="fa-solid fa-brain"></i>
                <div class="health-card-content">
                    <h3 data-en="Mental Clarity Techniques:" data-hi="मानसिक स्पष्टता तकनीकें:" data-mr="मानसिक स्पष्टता तंत्र:">Mental Clarity Techniques:</h3>
                    <p data-en="Practice mindfulness meditation for 10-15 minutes daily to improve focus and reduce stress. Listen to calming music, engage in hobbies, or read to divert attention from cravings. Ensure adequate sleep for mental well-being." data-hi="ध्यान केंद्रित करने और तनाव को कम करने के लिए प्रतिदिन 10-15 मिनट तक माइंडफुलनेस मेडिटेशन का अभ्यास करें। लालसा से ध्यान हटाने के लिए शांत संगीत सुनें, शौक में संलग्न हों, या पढ़ें। मानसिक स्वास्थ्य के लिए पर्याप्त नींद सुनिश्चित करें।" data-mr="लक्ष्य सुधारण्यासाठी आणि ताण कमी करण्यासाठी दररोज 10-15 मिनिटे माइंडफुलनेस मेडिटेशनचा सराव करा. लालसांपासून लक्ष विचलित करण्यासाठी शांत संगीत ऐका, छंदात सहभागी व्हा किंवा वाचा. मानसिक आरोग्यासाठी पुरेशी झोप घ्या.">Practice mindfulness meditation for 10-15 minutes daily to improve focus and reduce stress. Listen to calming music, engage in hobbies, or read to divert attention from cravings. Ensure adequate sleep for mental well-being.</p>
                </div>
            </div>

            <div class="button-group">
                <button class="app-button-back" onclick="showScreen('dailyFocusScreen')"><i class="fa-solid fa-arrow-left"></i> <span data-en="Daily Focus" data-hi="दैनिक ध्यान" data-mr="दैनिक लक्ष">Daily Focus</span></button>
                <button class="app-button-primary" onclick="showScreen('progressTracker')"><span data-en="Progress Tracker" data-hi="प्रगति ट्रैकर" data-mr="प्रगती ट्रॅकर">Progress Tracker</span> <i class="fa-solid fa-chart-line"></i></button>
            </div>
        </div>

        <div id="progressTracker" class="card-container">
            <div id="progressTrackerTopStepper" class="stepper-container"></div>
            <h2 class="section-header" data-en="Your Progress Tracker" data-hi="आपकी प्रगति ट्रैकर" data-mr="तुमचा प्रगती ट्रॅकर">Your Progress Tracker</h2>
            <p class="section-subheader" data-en="Track your progress and celebrate your achievements! Your journey log records milestones towards a smoke-free life." data-hi="अपनी प्रगति को ट्रैक करें और अपनी उपलब्धियों का जश्न मनाएं! आपका यात्रा लॉग धूम्रपान मुक्त जीवन की ओर मील के पत्थर रिकॉर्ड करता है।" data-mr="तुमची प्रगती तपासा आणि तुमचे यश साजरे करा! तुमचा प्रवास लॉग धूम्रपानमुक्त जीवनाकडे मैलाचे दगड नोंदवतो.">Track your progress and celebrate your achievements! Your journey log records milestones towards a smoke-free life.</p>
            
            <div class="grid grid-cols-2 gap-4 text-center mb-6 w-full max-w-md">
                <div class="bg-gray-100 p-4 rounded-lg"><div class="text-2xl font-bold text-teal-600" id="daysFree">0</div><div class="text-sm text-gray-500" data-en="Days Smoke-Free" data-hi="धूम्रपान-मुक्त दिन" data-mr="धूम्रपान-मुक्त दिवस">Days Smoke-Free</div></div>
                <div class="bg-gray-100 p-4 rounded-lg"><div class="text-2xl font-bold text-teal-600" id="hoursFree">0</div><div class="text-sm text-gray-500" data-en="Hours Smoke-Free" data-hi="धूम्रपान-मुक्त घंटे" data-mr="धूम्रपान-मुक्त तास">Hours Smoke-Free</div></div>
                <div class="bg-gray-100 p-4 rounded-lg"><div class="text-2xl font-bold text-teal-600" id="minutesFree">0</div><div class="text-sm text-gray-500" data-en="Minutes Smoke-Free" data-hi="धूम्रपान-मुक्त मिनट" data-mr="धूम्रपान-मुक्त मिनिटे">Minutes Smoke-Free</div></div>
                <div class="bg-gray-100 p-4 rounded-lg"><div class="text-2xl font-bold text-teal-600" id="moneySaved">₹0</div><div class="text-sm text-gray-500" data-en="Money Saved" data-hi="बचाया गया पैसा" data-mr="पैसे वाचवले">Money Saved</div></div>
            </div>

            <div id="journeyLog" class="w-full max-w-md space-y-3 max-h-64 scrollable-content-area p-3"></div>

            <div class="button-group">
               <button class="app-button-back" onclick="showScreen('supportResourcesScreen')"><i class="fa-solid fa-arrow-left"></i> <span data-en="Support Resources" data-hi="समर्थन संसाधन" data-mr="समर्थन संसाधने">Support Resources</span></button>
               <button class="app-button-secondary" onclick="showScreen('communityHubScreen')"><span data-en="Community" data-hi="समुदाय" data-mr="समुदाय">Community</span> <i class="fa-solid fa-users"></i></button>
            </div>
        </div>

        <div id="communityHubScreen" class="card-container">
            <h2 class="section-header" data-en="Community Hub" data-hi="समुदाय हब" data-mr="समुदाय केंद्र">Community Hub</h2>
            <p class="section-subheader" data-en="Connect with others on their quitting journey. Share your story, get support, and find encouragement." data-hi="अपनी छोड़ने की यात्रा पर दूसरों से जुड़ें। अपनी कहानी साझा करें, समर्थन प्राप्त करें, और प्रोत्साहन खोजें।" data-mr="तुमच्या सोडण्याच्या प्रवासात इतरांशी कनेक्ट व्हा. तुमची कथा सामायिक करा, समर्थन मिळवा आणि प्रोत्साहन शोधा.">Connect with others on their quitting journey. Share your story, get support, and find encouragement.</p>
            
            <p class="section-subheader mt-6" data-en="Testimonials" data-hi="प्रशंसापत्र" data-mr="प्रशंसापत्र">Testimonials</p>
            <div class="w-full max-w-md text-left space-y-4">
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                    <p class="font-semibold text-gray-800">Anil K.</p>
                    <p class="text-gray-600 text-sm" data-en="&quot;Uday Kiran helped me quit after 15 years. The daily focus and craving distractions were lifesavers!&quot;" data-hi="&quot;उदय किरण ने मुझे 15 साल बाद छोड़ने में मदद की। दैनिक ध्यान और लालसा विचलित करने वाले जीवनरक्षक थे!&quot;" data-mr="&quot;उदय किरणने मला 15 वर्षांनंतर सोडण्यास मदत केली. दैनंदिन लक्ष आणि लालसा विचलित करणारे जीवनरक्षक होते!&quot;">"Uday Kiran helped me quit after 15 years. The daily focus and craving distractions were lifesavers!"</p>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                    <p class="font-semibold text-gray-800">Priya S.</p>
                    <p class="text-gray-600 text-sm" data-en="&quot;The progress tracker kept me motivated. Seeing the money saved was a huge incentive!&quot;" data-hi="&quot;प्रगति ट्रैकर ने मुझे प्रेरित रखा। बचाए गए पैसे देखकर एक बड़ा प्रोत्साहन मिला!&quot;" data-mr="&quot;प्रगती ट्रॅकरने मला प्रेरित ठेवले. वाचलेले पैसे पाहून खूप प्रोत्साहन मिळाले!&quot;">"The progress tracker kept me motivated. Seeing the money saved was a huge incentive!"</p>
                </div>
            </div>
            <button class="app-button-secondary mt-4"><span data-en="Share Your Story" data-hi="अपनी कहानी साझा करें" data-mr="तुमची कथा सामायिक करा">Share Your Story</span> <i class="fa-solid fa-share-alt"></i></button>

            <p class="section-subheader mt-6" data-en="Anonymous Group Sessions" data-hi="गुमनाम समूह सत्र" data-mr="अनामित गट सत्रे">Anonymous Group Sessions</p>
            <p class="text-sm text-gray-600 mb-4" data-en="Join live, anonymous group sessions for support and shared experiences." data-hi="समर्थन और साझा अनुभवों के लिए लाइव, गुमनाम समूह सत्रों में शामिल हों।" data-mr="समर्थन आणि सामायिक अनुभवांसाठी थेट, अनामित गट सत्रांमध्ये सामील व्हा.">Join live, anonymous group sessions for support and shared experiences.</p>
            <button class="app-button-primary"><span data-en="Join a Session" data-hi="एक सत्र में शामिल हों" data-mr="एक सत्रात सामील व्हा">Join a Session</span> <i class="fa-solid fa-users-line"></i></button>

            <div class="button-group">
                <button class="app-button-back" onclick="showScreen('progressTracker')"><i class="fa-solid fa-arrow-left"></i> <span data-en="Progress Tracker" data-hi="प्रगति ट्रैकर" data-mr="प्रगती ट्रॅकर">Progress Tracker</span></button>
                <button class="app-button-primary" onclick="showScreen('resourceCenterScreen')"><span data-en="Resource Center" data-hi="संसाधन केंद्र" data-mr="संसाधन केंद्र">Resource Center</span> <i class="fa-solid fa-book-open"></i></button>
            </div>
        </div>

        <div id="resourceCenterScreen" class="card-container">
            <h2 class="section-header" data-en="Resource Center" data-hi="संसाधन केंद्र" data-mr="संसाधन केंद्र">Resource Center</h2>
            <p class="section-subheader" data-en="Access valuable information and tools to further empower your journey. Explore these resources at your convenience." data-hi="अपनी यात्रा को और सशक्त बनाने के लिए मूल्यवान जानकारी और उपकरण प्राप्त करें। अपनी सुविधानुसार इन संसाधनों का अन्वेषण करें।" data-mr="तुमचा प्रवास अधिक सक्षम करण्यासाठी मौल्यवान माहिती आणि साधनांपर्यंत पोहोचा. तुमच्या सोयीनुसार ही संसाधने एक्सप्लोर करा.">Access valuable information and tools to further empower your journey. Explore these resources at your convenience.</p>
            
            <div class="button-group">
                <button class="app-button-back" onclick="showScreen('communityHubScreen')"><i class="fa-solid fa-arrow-left"></i> <span data-en="Community" data-hi="समुदाय" data-mr="समुदाय">Community</span></button>
                <button class="app-button-primary" onclick="showScreen('welcomeScreen')"><span data-en="Return to Home" data-hi="होम पर वापस" data-mr="घरी परत जा">Return to Home</span> <i class="fa-solid fa-home"></i></button>
            </div>
        </div>

        <div id="nrtGuidelinesScreen" class="card-container">
            <h2 class="section-header" data-en="Nicotine Replacement Therapy Guidelines" data-hi="निकोटीन रिप्लेसमेंट थेरेपी दिशानिर्देश" data-mr="निकोटीन रिप्लेसमेंट थेरपी मार्गदर्शक तत्त्वे">Nicotine Replacement Therapy Guidelines</h2>
            <p class="section-subheader" data-en="Explore recommended Nicotine Replacement Therapy (NRT) dosages based on your dependence level." data-hi="अपनी निर्भरता स्तर के आधार पर अनुशंसित निकोटीन रिप्लेसमेंट थेरेपी (एनआरटी) खुराक का अन्वेषण करें।" data-mr="तुमच्या अवलंबित्व पातळीनुसार शिफारस केलेल्या निकोटीन रिप्लेसमेंट थेरपी (एनआरटी) डोसचा शोध घ्या.">Explore recommended Nicotine Replacement Therapy (NRT) dosages based on your dependence level.</p>
            
            <div class="w-full max-w-2xl overflow-x-auto">
                <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
                    <thead>
                        <tr class="bg-gray-100 border-b">
                            <th class="py-3 px-4 text-left text-sm font-semibold text-gray-600" data-en="Dependence Level" data-hi="निर्भरता स्तर" data-mr="अवलंबित्व पातळी">Dependence Level</th>
                            <th class="py-3 px-4 text-left text-sm font-semibold text-gray-600" data-en="NRT Dosage (Initial)" data-hi="एनआरटी खुराक (प्रारंभिक)" data-mr="एनआरटी डोस (प्रारंभिक)">NRT Dosage (Initial)</th>
                            <th class="py-3 px-4 text-left text-sm font-semibold text-gray-600" data-en="Combination Therapy Option" data-hi="संयोजन थेरेपी विकल्प" data-mr="संयोजन थेरपी पर्याय">Combination Therapy Option</th>
                        </tr>
                    </thead>
                    <tbody id="nrtGuidelinesTableBody">
                        </tbody>
                </table>
            </div>

            <div class="button-group">
                <button class="app-button-back" onclick="showScreen('supportResourcesScreen')"><i class="fa-solid fa-arrow-left"></i> <span data-en="Back" data-hi="पीछे" data-mr="मागे">Back</span></button>
            </div>
        </div>

    </div>

    <script>
        let currentUser = {};
        let currentFagerstromQuestion = 0;
        let fagerstromAnswers = Array(6).fill(null);
        let fagerstromScore = 0;
        let nicotineDependenceLevel = '';
        let quitDate = null;
        let selectedMotivations = [];
        let supporters = [];
        let dangerTimes = [];
        let dailyLog = []; // Stores objects like { date: 'YYYY-MM-DD', cigarettes: N, focus: '...' }

        const languages = ['en', 'hi', 'mr'];
        let currentLanguageIndex = 0;
        let currentLanguage = languages[currentLanguageIndex];

        const fagerstromQuestions = [
            {
                question: {
                    en: "How soon after waking up do you smoke your first cigarette?",
                    hi: "जागने के कितनी देर बाद आप अपनी पहली सिगरेट पीते हैं?",
                    mr: "जागे झाल्यावर किती वेळात तुम्ही तुमची पहिली सिगारेट पिता?"
                },
                options: [
                    { en: "Within 5 minutes", hi: "5 मिनट के भीतर", mr: "5 मिनिटांच्या आत", score: 3 },
                    { en: "6-30 minutes", hi: "6-30 मिनट", mr: "6-30 मिनिटे", score: 2 },
                    { en: "31-60 minutes", hi: "31-60 मिनट", mr: "31-60 मिनिटे", score: 1 },
                    { en: "After 60 minutes", hi: "60 मिनट के बाद", mr: "60 मिनिटांनंतर", score: 0 }
                ]
            },
            {
                question: {
                    en: "Do you find it difficult to refrain from smoking in places where it is forbidden (e.g., in church, at the library, in cinema)?",
                    hi: "क्या आपको उन जगहों पर धूम्रपान से परहेज करना मुश्किल लगता है जहाँ यह मना है (जैसे चर्च में, पुस्तकालय में, सिनेमा में)?",
                    mr: "ज्या ठिकाणी धूम्रपान करण्यास मनाई आहे (उदा. चर्चमध्ये, लायब्ररीमध्ये, सिनेमामध्ये) अशा ठिकाणी धूम्रपान न करणे तुम्हाला कठीण वाटते का?",
                },
                options: [
                    { en: "Yes", hi: "हाँ", mr: "होय", score: 1 },
                    { en: "No", hi: "नहीं", mr: "नाही", score: 0 }
                ]
            },
            {
                question: {
                    en: "Which cigarette would you hate most to give up?",
                    hi: "आप कौन सी सिगरेट सबसे ज्यादा छोड़ना चाहेंगे?",
                    mr: "तुम्ही कोणती सिगारेट सोडायला सर्वात जास्त नापसंत कराल?",
                },
                options: [
                    { en: "The first one in the morning", hi: "सुबह की पहली सिगरेट", mr: "सकाळची पहिली सिगारेट", score: 1 },
                    { en: "All others", hi: "अन्य सभी", mr: "इतर सर्व", score: 0 }
                ]
            },
            {
                question: {
                    en: "How many cigarettes per day do you smoke?",
                    hi: "आप प्रति दिन कितनी सिगरेट पीते हैं?",
                    mr: "तुम्ही दररोज किती सिगारेट पिता?",
                },
                options: [
                    { en: "10 or less", hi: "10 या उससे कम", mr: "10 किंवा त्यापेक्षा कमी", score: 0 },
                    { en: "11-20", hi: "11-20", mr: "11-20", score: 1 },
                    { en: "21-30", hi: "21-30", mr: "21-30", score: 2 },
                    { en: "31 or more", hi: "31 या उससे अधिक", mr: "31 किंवा त्यापेक्षा जास्त", score: 3 }
                ]
            },
            {
                question: {
                    en: "Do you smoke more frequently during the first hours after waking than during the rest of the day?",
                    hi: "क्या आप जागने के पहले घंटों के दौरान दिन के बाकी हिस्सों की तुलना में अधिक बार धूम्रपान करते हैं?",
                    mr: "जागे झाल्यावर पहिल्या काही तासांमध्ये तुम्ही दिवसाच्या बाकीच्या वेळेपेक्षा जास्त वेळा धूम्रपान करता का?",
                },
                options: [
                    { en: "Yes", hi: "हाँ", mr: "होय", score: 1 },
                    { en: "No", hi: "नहीं", mr: "नाही", score: 0 }
                ]
            },
            {
                question: {
                    en: "Do you smoke even if you are so ill that you are in bed most of the day?",
                    hi: "क्या आप तब भी धूम्रपान करते हैं जब आप इतने बीमार होते हैं कि दिन का अधिकांश समय बिस्तर पर ही रहते हैं?",
                    mr: "दिवसातील बहुतेक वेळ अंथरुणावर असतानाही तुम्ही धूम्रपान करता का?",
                },
                options: [
                    { en: "Yes", hi: "हाँ", mr: "होय", score: 1 },
                    { en: "No", hi: "नहीं", mr: "नाही", score: 0 }
                ]
            }
        ];

        const distractionIdeas = [
            { en: "Stretch for a few minutes, focusing on the sensations in your body.", hi: "कुछ मिनटों के लिए स्ट्रेच करें, अपने शरीर में संवेदनाओं पर ध्यान केंद्रित करें।", mr: "काही मिनिटे स्ट्रेच करा, तुमच्या शरीरातील संवेदनांवर लक्ष केंद्रित करा." },
            { en: "Drink a glass of water slowly.", hi: "धीरे-धीरे एक गिलास पानी पिएं।", mr: "हळू हळू एक ग्लास पाणी प्या." },
            { en: "Take 5 deep breaths, in through your nose and out through your mouth.", hi: "नाक से अंदर और मुंह से बाहर 5 गहरी साँसें लें।", mr: "नाकातून आत आणि तोंडातून बाहेर 5 दीर्घ श्वास घ्या." },
            { en: "Call a friend or family member for a quick chat.", hi: "जल्दी बात करने के लिए किसी दोस्त या परिवार के सदस्य को फोन करें।", mr: "झटपट गप्पा मारण्यासाठी मित्र किंवा कुटुंबातील सदस्याला फोन करा." },
            { en: "Go for a short walk outside.", hi: "बाहर टहलने जाएं।", mr: "बाहेर थोडी चाल घ्या." },
            { en: "Listen to your favorite song.", hi: "अपना पसंदीदा गाना सुनें।", mr: "तुमचे आवडते गाणे ऐका." },
            { en: "Do a quick chore like washing dishes or folding laundry.", hi: "बर्तन धोना या कपड़े मोड़ना जैसे कोई छोटा काम करें।", mr: "भांडी धुणे किंवा कपडे घडी घालणे यांसारखे छोटे काम करा." },
            { en: "Engage in a quick puzzle or brain game.", hi: "एक त्वरित पहेली या दिमागी खेल में संलग्न हों।", mr: "एक त्वरित कोडे किंवा मेंदूचा खेळ खेळा." },
            { en: "Read a short article or a few pages of a book.", hi: "एक छोटा लेख या किताब के कुछ पन्ने पढ़ें।", mr: "एक छोटा लेख किंवा पुस्तकाची काही पाने वाचा." },
            { en: "Chew on a piece of gum or suck on a lozenge.", hi: "गम चबाएं या लोजेंज चूसें।", mr: "गम चघळा किंवा लोजेंज चोखा." }
        ];
        let currentDistractionIdeaIndex = 0;


        const screens = [
            'welcomeScreen', 'quitDecisionScreen', 'goalsMotivationsScreen', 'supportSystemScreen',
            'congratulationsScreen', 'fagerstromTest', 'healthOverviewScreen',
            'dangerTimesCravingsScreen', 'dailyFocusScreen', 'supportResourcesScreen',
            'nrtGuidelinesScreen', 'progressTracker', 'communityHubScreen', 'resourceCenterScreen'
        ];

        const translations = {
            appName: { en: "Uday Kiran", hi: "उदय किरण", mr: "उदय किरण" },
            title: {
                en: "Uday Kiran - Your Journey to Freedom",
                hi: "उदय किरण - स्वतंत्रता की आपकी यात्रा",
                mr: "उदय किरण - तुमचा स्वातंत्र्याचा प्रवास"
            },
            welcomeHeader: { en: "Your Journey to Freedom Starts Here", hi: "स्वतंत्रता की आपकी यात्रा यहीं से शुरू होती है", mr: "तुमचा स्वातंत्र्याचा प्रवास इथेच सुरू होतो" },
            welcomeSubheader: { en: "Empowering you to quit tobacco for a healthier, happier life.", hi: "आपको स्वस्थ, खुशहाल जीवन के लिए तंबाकू छोड़ने के लिए सशक्त बनाना।", mr: "निरोगी, आनंदी जीवनासाठी तुम्हाला तंबाखू सोडण्यासाठी सक्षम करणे." },
            startJourney: { en: "Start My Journey", hi: "मेरी यात्रा शुरू करें", mr: "माझा प्रवास सुरू करा" },
            quitReadyHeader: { en: "Ready to Quit?", hi: "छोड़ने के लिए तैयार हैं?", mr: "सोडण्यासाठी तयार आहात?" },
            quitReadySubheader: { en: "Set your quit date and take the first step towards a smoke-free life.", hi: "अपनी छोड़ने की तारीख निर्धारित करें और धूम्रपान मुक्त जीवन की ओर पहला कदम उठाएं।", mr: "तुमची सोडण्याची तारीख निश्चित करा आणि धूम्रपानमुक्त जीवनाकडे पहिले पाऊल टाका." },
            myQuitDate: { en: "My Quit Date:", hi: "मेरी छोड़ने की तारीख:", mr: "माझी सोडण्याची तारीख:" },
            confirmDate: { en: "Confirm Date", hi: "तारीख की पुष्टि करें", mr: "तारीख निश्चित करा" },
            back: { en: "Back", hi: "पीछे", mr: "मागे" },
            congratulationsHeader: { en: "Congratulations!", hi: "बधाई हो!", mr: "अभिनंदन!" },
            congratulationsSubheader: { en: "You've set your quit date! Your journey to a healthier life begins now.", hi: "आपने अपनी छोड़ने की तारीख निर्धारित कर ली है! स्वस्थ जीवन की आपकी यात्रा अब शुरू होती है।", mr: "तुम्ही तुमची सोडण्याची तारीख निश्चित केली आहे! निरोगी जीवनाकडे तुमचा प्रवास आता सुरू होतो." },
            assessDependence: { en: "Assess My Dependence", hi: "मेरी निर्भरता का आकलन करें", mr: "माझे अवलंबित्व तपासा" },
            fagerstromHeader: { en: "Fagerström Test for Nicotine Dependence", hi: "निकोटीन निर्भरता के लिए फेगरस्ट्रॉम टेस्ट", mr: "निकोटीन अवलंबित्व तपासणीसाठी फागेरस्ट्रॉम टेस्ट" },
            fagerstromSubheader: { en: "Answer these questions to understand your nicotine dependence level.", hi: "अपने निकोटीन निर्भरता स्तर को समझने के लिए इन प्रश्नों का उत्तर दें।", mr: "तुमच्या निकोटीन अवलंबित्व पातळी समजून घेण्यासाठी या प्रश्नांची उत्तरे द्या." },
            previous: { en: "Previous", hi: "पिछला", mr: "मागील" },
            next: { en: "Next", hi: "अगला", mr: "पुढील" },
            submit: { en: "Submit", hi: "जमा करें", mr: "सादर करा" },
            healthOverviewHeader: { en: "Your Health Overview", hi: "आपका स्वास्थ्य अवलोकन", mr: "तुमचे आरोग्य विहंगावलोकन" },
            healthOverviewSubheader: { en: "Understanding your dependence helps tailor your quit plan.", hi: "अपनी निर्भरता को समझना आपकी छोड़ने की योजना को तैयार करने में मदद करता है।", mr: "तुमचे अवलंबित्व समजून घेतल्याने तुमची सोडण्याची योजना तयार करण्यास मदत होते." },
            lungHealth: { en: "Lung Health", hi: "फेफड़ों का स्वास्थ्य", mr: "फुफ्फुसांचे आरोग्य" },
            lungHealthDesc: { en: "Your lungs will start to heal and function better.", hi: "आपके फेफड़े ठीक होने लगेंगे और बेहतर काम करेंगे।", mr: "तुमची फुफ्फुसे बरी होऊ लागतील आणि अधिक चांगले कार्य करतील.">Your lungs will start to heal and function better." },
            cardioHealth: { en: "Cardiovascular Health", hi: "हृदय स्वास्थ्य", mr: "हृदयाचे आरोग्य" },
            cardioHealthDesc: { en: "Reduced risk of heart disease and stroke.", hi: "हृदय रोग और स्ट्रोक का जोखिम कम होगा।", mr: "हृदयविकार आणि स्ट्रोकचा धोका कमी होईल." },
            mentalWellbeing: { en: "Mental Well-being", hi: "मानसिक स्वास्थ्य", mr: "मानसिक आरोग्य" },
            mentalWellbeingDesc: { en: "Improved mood and reduced anxiety over time.", hi: "समय के साथ बेहतर मूड और कम चिंता।", mr: "कालांतराने सुधारलेला मूड आणि कमी झालेली चिंता." },
            retakeTest: { en: "Retake Test", hi: "टेस्ट फिर से दें", mr: "चाचणी पुन्हा द्या" },
            viewProgress: { en: "View Progress", hi: "प्रगति देखें", mr: "प्रगती पहा" },
            progressTrackerHeader: { en: "Your Progress Tracker", hi: "आपकी प्रगति ट्रैकर", mr: "तुमचा प्रगती ट्रॅकर" },
            progressTrackerSubheader: { en: "Track your progress and celebrate your achievements! Your journey log records milestones towards a smoke-free life.", hi: "अपनी प्रगति को ट्रैक करें और अपनी उपलब्धियों का जश्न मनाएं! आपका यात्रा लॉग धूम्रपान मुक्त जीवन की ओर मील के पत्थर रिकॉर्ड करता है।", mr: "तुमची प्रगती तपासा आणि तुमचे यश साजरे करा! तुमचा प्रवास लॉग धूम्रपानमुक्त जीवनाकडे मैलाचे दगड नोंदवतो." },
            daysSmokeFree: { en: "Days Smoke-Free", hi: "धूम्रपान-मुक्त दिन", mr: "धूम्रपान-मुक्त दिवस" },
            hoursSmokeFree: { en: "Hours Smoke-Free", hi: "धूम्रपान-मुक्त घंटे", mr: "धूम्रपान-मुक्त तास" },
            minutesSmokeFree: { en: "Minutes Smoke-Free", hi: "धूम्रपान-मुक्त मिनट", mr: "धूम्रपान-मुक्त मिनिटे" },
            moneySaved: { en: "Money Saved", hi: "बचाया गया पैसा", mr: "पैसे वाचवले" },
            overview: { en: "Overview", hi: "अवलोकन", mr: "अवलोकन" },
            backToHome: { en: "Back to Home", hi: "होम पर वापस", mr: "घरी परत जा" },
            highDependence: { en: "High Dependence", hi: "उच्च निर्भरता", mr: "उच्च अवलंबित्व" },
            moderateDependence: { en: "Moderate Dependence", hi: "मध्यम निर्भरता", mr: "मध्यम अवलंबित्व" },
            lowDependence: { en: "Low Dependence", hi: "कम निर्भरता", mr: "कमी अवलंबित्व" },
            highDependenceAdvice: { en: "Your dependence has a <strong>significant impact</strong>. Focusing on cessation is crucial for improving lung, cardiovascular, and mental health. Let's build a plan.", hi: "आपकी निर्भरता का <strong>महत्वपूर्ण प्रभाव</strong> है। फेफड़ों, हृदय और मानसिक स्वास्थ्य में सुधार के लिए समाप्ति पर ध्यान केंद्रित करना महत्वपूर्ण है। आइए एक योजना बनाएं।", mr: "तुमची निर्भरता <strong>लक्षणीय परिणाम</strong> करते. फुफ्फुस, हृदय व रक्तवाहिन्यासंबंधी आणि मानसिक आरोग्य सुधारण्यासाठी धूम्रपान सोडण्यावर लक्ष केंद्रित करणे महत्त्वाचे आहे. चला एक योजना तयार करूया." },
            moderateDependenceAdvice: { en: "Your tobacco use has a <strong>moderate impact</strong>. This is a critical time to implement effective strategies to prevent further damage. Consistent effort will bring great results.", hi: "आपके तंबाकू के उपयोग का <strong>मध्यम प्रभाव</strong> है। आगे की क्षति को रोकने के लिए प्रभावी रणनीतियों को लागू करने का यह एक महत्वपूर्ण समय है। लगातार प्रयास से अच्छे परिणाम मिलेंगे।", mr: "तुमच्या तंबाखूच्या वापराचा <strong>मध्यम परिणाम</strong> होतो. पुढील नुकसान टाळण्यासाठी प्रभावी रणनीती लागू करण्याची ही एक महत्त्वाची वेळ आहे. सातत्यपूर्ण प्रयत्नांना चांगले परिणाम मिळतील." },
            lowDependenceAdvice: { en: "Your dependence is <strong>low</strong>, a great advantage! This gives you a strong foundation. Focus on reinforcing healthy habits to stay smoke-free.", hi: "आपकी निर्भरता <strong>कम</strong> है, यह एक बड़ा फायदा है! यह आपको एक मजबूत आधार देता है। धूम्रपान मुक्त रहने के लिए स्वस्थ आदतों को मजबूत करने पर ध्यान दें।", mr: "तुमची निर्भरता <strong>कमी</strong> आहे, हा एक मोठा फायदा आहे! हे तुम्हाला एक मजबूत पाया देते. धूम्रपानमुक्त राहण्यासाठी निरोगी सवयी मजबूत करण्यावर लक्ष केंद्रित करा." },
            overallImpact: { en: "Overall Impact", hi: "कुल प्रभाव", mr: "एकूण परिणाम"},
            fagerstromScoreLabel: { en: "Score", hi: "स्कोर", mr: "गुण" },
            viewNRTGuidelines: { en: "View NRT Guidelines", hi: "एनआरटी दिशानिर्देश देखें", mr: "एनआरटी मार्गदर्शक तत्त्वे पहा" },
            nrtGuidelines: {
                title: {
                    en: "Nicotine Replacement Therapy Guidelines",
                    hi: "निकोटीन रिप्लेसमेंट थेरेपी दिशानिर्देश",
                    mr: "निकोटीन रिप्लेसमेंट थेरपी मार्गदर्शक तत्त्वे"
                },
                intro: {
                    en: "Explore recommended Nicotine Replacement Therapy (NRT) dosages based on your dependence level.",
                    hi: "अपनी निर्भरता स्तर के आधार पर अनुशंसित निकोटीन रिप्लेसमेंट थेरेपी (एनआरटी) खुराक का अन्वेषण करें।",
                    mr: "तुमच्या अवलंबित्व पातळीनुसार शिफारस केलेल्या निकोटीन रिप्लेसमेंट थेरपी (एनआरटी) डोसचा शोध घ्या."
                },
                tableHeaders: {
                    dependenceLevel: { en: "Dependence Level", hi: "निर्भरता स्तर", mr: "अवलंबित्व पातळी" },
                    nrtDosageInitial: { en: "NRT Dosage (Initial)", hi: "एनआरटी खुराक (प्रारंभिक)", mr: "एनआरटी डोस (प्रारंभिक)" },
                    combinationTherapy: { en: "Combination Therapy Option", hi: "संयोजन थेरेपी विकल्प", mr: "संयोजन थेरपी पर्याय" }
                },
                data: [
                    {
                        level: { en: "High", hi: "उच्च", mr: "उच्च" },
                        dosage: { en: "Patches: 21mg/24hr or 15mg/16hr; Inhaler: 6-12 cartridges per day; Lozenge: 4mg; Gum: 4mg", hi: "पैच: 21 मिग्रा/24घंटे या 15 मिग्रा/16घंटे; इन्हेलर: 6-12 कार्ट्रिज प्रति दिन; लोजेंज: 4 मिग्रा; गम: 4 मिग्रा", mr: "पॅचेस: 21मिग्रॅ/24तास किंवा 15मिग्रॅ/16तास; इनहेलर: 6-12 काडतुसे प्रति दिन; लोजेंज: 4मिग्रॅ; गम: 4मिग्रॅ" },
                        combination: { en: "Patches: 21mg/24hr or 15mg/16hr AND Lozenge or Gum: 2mg", hi: "पैच: 21 मिग्रा/24घंटे या 15 मिग्रा/16घंटे और लोजेंज या गम: 2 मिग्रा", mr: "पॅचेस: 21मिग्रॅ/24तास किंवा 15मिग्रॅ/16तास आणि लोजेंज किंवा गम: 2मिग्रॅ" }
                    },
                    {
                        level: { en: "Moderate", hi: "मध्यम", mr: "मध्यम" },
                        dosage: { en: "Patches: 14mg/24hr or 10mg/16hr; Inhaler: 4-6 cartridges per day; Lozenge: 2mg; Gum: 2mg", hi: "पैच: 14 मिग्रा/24घंटे या 10 मिग्रा/16घंटे; इन्हेलर: 4-6 कार्ट्रिज प्रति दिन; लोजेंज: 2 मिग्रा; गम: 2 मिग्रा", mr: "पॅचेस: 14मिग्रॅ/24तास किंवा 10मिग्रॅ/16तास; इनहेलर: 4-6 काडतुसे प्रति दिन; लोजेंज: 2मिग्रॅ; गम: 2मिग्रॅ" },
                        combination: { en: "Patches: 14mg/24hr or 10mg/16hr AND Lozenge or Gum: 2mg", hi: "पैच: 14 मिग्रा/24घंटे या 10 मिग्रा/16घंटे और लोजेंज या गम: 2 मिग्रा", mr: "पॅचेस: 14मिग्रॅ/24तास किंवा 10मिग्रॅ/16तास आणि लोजेंज किंवा गम: 2मिग्रॅ" }
                    },
                    {
                        level: { en: "Low", hi: "कम", mr: "कमी" },
                        dosage: { en: "Patches: 7mg/24hr or 5mg/16hr; Inhaler: 2-4 cartridges per day; Lozenge: 2mg; Gum: 2mg", hi: "पैच: 7 मिग्रा/24घंटे या 5 मिग्रा/16घंटे; इन्हेलर: 2-4 कार्ट्रिज प्रति दिन; लोजेंज: 2 मिग्रा; गम: 2 मिग्रा", mr: "पॅचेस: 7मिग्रॅ/24तास किंवा 5मिग्रॅ/16तास; इनहेलर: 2-4 काडतुसे प्रति दिन; लोजेंज: 2मिग्रॅ; गम: 2मिग्रॅ" },
                        combination: { en: "Not typically recommended for low dependence, focus on single NRT or behavioral support.", hi: "कम निर्भरता के लिए आमतौर पर अनुशंसित नहीं, एकल एनआरटी या व्यवहारिक सहायता पर ध्यान दें।", mr: "कमी अवलंबित्व असलेल्यांसाठी सामान्यतः शिफारस केलेले नाही, एकल एनआरटी किंवा वर्तणूक समर्थनावर लक्ष केंद्रित करा." }
                    }
                ]
            },
            goalsMotivations: {
                title: { en: "Set Your Goals & Motivations", hi: "अपने लक्ष्य और प्रेरणाएँ निर्धारित करें", mr: "तुमची ध्येये आणि प्रेरणा निश्चित करा" },
                subheader: { en: "What are your reasons and goals for quitting tobacco?", hi: "तंबाकू छोड़ने के आपके क्या कारण और लक्ष्य हैं?", mr: "तंबाखू सोडण्याची तुमची कारणे आणि ध्येये काय आहेत?" },
                mainGoalLabel: { en: "My main goal is...", hi: "मेरा मुख्य लक्ष्य है...", mr: "माझे मुख्य ध्येय आहे..." },
                motivationsLabel: { en: "My motivations (select all that apply):", hi: "मेरी प्रेरणाएँ (सभी लागू होने वाले चुनें):", mr: "माझ्या प्रेरणा (लागू होणारे सर्व निवडा):" },
                motivationOptions: {
                    improvedHealth: { en: "Improved Health", hi: "बेहतर स्वास्थ्य", mr: "सुधारलेले आरोग्य" },
                    forFamily: { en: "For my Family", hi: "मेरे परिवार के लिए", mr: "माझ्या कुटुंबासाठी" },
                    financialSavings: { en: "Financial Savings", hi: "वित्तीय बचत", mr: "आर्थिक बचत" },
                    freedomFromAddiction: { en: "Freedom from Addiction", hi: "लत से आजादी", mr: "व्यसनापासून मुक्ती" },
                    roleModel: { en: "To be a Role Model", hi: "एक आदर्श बनने के लिए", mr: "एक आदर्श बनण्यासाठी" },
                    betterSmellTaste: { en: "Better Smell/Taste", hi: "बेहतर गंध/स्वाद", mr: "चांगली वास/चव" },
                },
                otherMotivationsLabel: { en: "Other motivations (optional):", hi: "अन्य प्रेरणाएँ (वैकल्पिक):", mr: "इतर प्रेरणा (ऐच्छिक):" }
            },
            supportSystem: {
                title: { en: "Your Support System", hi: "आपका समर्थन प्रणाली", mr: "तुमची समर्थन प्रणाली" },
                subheader: { en: "Nominate friends or family who can help you in tough times. This is optional and you can skip it.", hi: "उन दोस्तों या परिवार के सदस्यों को नामित करें जो मुश्किल समय में आपकी मदद कर सकते हैं। यह वैकल्पिक है और आप इसे छोड़ सकते हैं।", mr: "कठीण काळात तुम्हाला मदत करू शकणारे मित्र किंवा कुटुंबातील सदस्यांना नामांकित करा. हे ऐच्छिक आहे आणि तुम्ही ते वगळू शकता." },
                supporterNameLabel: { en: "Supporter's Name", hi: "समर्थक का नाम", mr: "समर्थकाचे नाव" },
                supporterContactLabel: { en: "Contact (Phone/Email - optional)", hi: "संपर्क (फोन/ईमेल - वैकल्पिक)", mr: "संपर्क (फोन/ईमेल - ऐच्छिक)" },
                addSupporterBtn: { en: "Add Supporter", hi: "समर्थक जोड़ें", mr: "समर्थक जोडा" },
                noSupportersMessage: { en: "No supporters added yet.", hi: "अभी तक कोई समर्थक नहीं जोड़ा गया है।", mr: "अद्याप कोणताही समर्थक जोडलेला नाही." },
                skipBtn: { en: "Skip", hi: "छोड़ें", mr: "वगळा" }
            },
            dangerTimesCravings: {
                title: { en: "Manage Danger Times & Cravings", hi: "खतरनाक समय और लालसा का प्रबंधन करें", mr: "धोक्याचे वेळा आणि लालसा व्यवस्थापित करा" },
                subheader: { en: "Identify your 'Danger Times' when cravings are strongest. We'll help you distract yourself!", hi: "अपने 'खतरनाक समय' की पहचान करें जब लालसा सबसे मजबूत होती है। हम आपको खुद को विचलित करने में मदद करेंगे!", mr: "तुमच्या 'धोक्याच्या वेळा' ओळखा जेव्हा लालसा सर्वात मजबूत असते. आम्ही तुम्हाला स्वतःला विचलित करण्यात मदत करू!" },
                dangerTimeLabel: { en: "Nominate a Danger Time", hi: "एक खतरनाक समय नामित करें", mr: "एक धोक्याची वेळ नामांकित करा" },
                addDangerTimeBtn: { en: "Add Danger Time", hi: "खतरनाक समय जोड़ें", mr: "धोक्याची वेळ जोडा" },
                noDangerTimesMessage: { en: "No danger times added yet.", hi: "अभी तक कोई खतरनाक समय नहीं जोड़ा गया है।", mr: "अद्याप कोणतीही धोक्याची वेळ जोडलेली नाही." },
                distractionIdeasLabel: { en: "Distraction Ideas", hi: "विचलित करने वाले विचार", mr: "विचलित करणारे विचार" },
                getAnotherIdeaBtn: { en: "Get Another Idea", hi: "एक और विचार प्राप्त करें", mr: "दुसरी कल्पना मिळवा" },
                reminderServiceLabel: { en: "Reminder Service", hi: "अनुस्मारक सेवा", mr: "स्मरणपत्र सेवा" },
                reminderServiceSubheader: { en: "Opt-in for timely reminders to help you fight cravings and stay tobacco-free.", hi: "लालसा से लड़ने और तंबाकू मुक्त रहने में आपकी मदद करने के लिए समय पर अनुस्मारक प्राप्त करने का विकल्प चुनें।", mr: "लालसांना सामोरे जाण्यासाठी आणि तंबाखूमुक्त राहण्यासाठी वेळेवर स्मरणपत्रे मिळवा." },
                emailRemindersLabel: { en: "Email Reminders", hi: "ईमेल अनुस्मारक", mr: "ईमेल स्मरणपत्रे" },
                smsRemindersLabel: { en: "SMS Reminders", hi: "एसएमएस अनुस्मारक", mr: "एसएमएस स्मरणपत्रे" },
                yourEmailLabel: { en: "Your Email", hi: "आपका ईमेल", mr: "तुमचा ईमेल" },
                yourPhoneLabel: { en: "Your Phone Number", hi: "आपका फ़ोन नंबर", mr: "तुमचा फोन नंबर" },
                savePreferencesBtn: { en: "Save Preferences", hi: "वरीयताएँ सहेजें", mr: "पसंती जतन करा" },
                cravingsNav: { en: "Cravings", hi: "लालसा", mr: "लालसा" } // For navigation button
            },
            dailyFocus: {
                title: { en: "Daily Focus", hi: "दैनिक ध्यान", mr: "दैनिक लक्ष" },
                subheader: { en: "For today, here's a specific focus or challenge to help you on your journey to quit tobacco.", hi: "आज के लिए, तंबाकू छोड़ने की आपकी यात्रा में मदद करने के लिए यहाँ एक विशिष्ट ध्यान या चुनौती है।", mr: "आजसाठी, तंबाखू सोडण्याच्या तुमच्या प्रवासात मदत करण्यासाठी येथे एक विशिष्ट लक्ष किंवा आव्हान आहे." },
                smokedYesterdayLabel: { en: "How many cigarettes did you smoke yesterday?", hi: "कल आपने कितनी सिगरेट पीं?", mr: "काल तुम्ही किती सिगारेट प्यायलात?" },
                generateFocusBtn: { en: "Generate Today's Focus", hi: "आज का ध्यान उत्पन्न करें", mr: "आजचे लक्ष निर्माण करा" },
                goodEffort: { en: "Good effort!", hi: "अच्छा प्रयास!", mr: "चांगला प्रयत्न!" },
                todaysFocus: { en: "Today's focus:", hi: "आज का ध्यान:", mr: "आजचे लक्ष:" },
                targetReduce: { en: "Target reducing your cigarette count to %s or less.", hi: "अपनी सिगरेट की संख्या को %s या उससे कम करने का लक्ष्य रखें।", mr: "तुमच्या सिगारेटची संख्या %s किंवा त्यापेक्षा कमी करण्याचे लक्ष्य ठेवा." },
                implementDistraction: { en: "Implement a distraction technique when a craving hits.", hi: "जब लालसा लगे तो एक विचलित करने वाली तकनीक लागू करें।", mr: "जेव्हा लालसा येते तेव्हा विचलित करण्याची तंत्र वापरा." },
                keepGoing: { en: "Keep going!", hi: "जारी रखें!", mr: "सुरू ठेवा!" },
                supportResourcesNav: { en: "Support Resources", hi: "समर्थन संसाधन", mr: "समर्थन संसाधने" }
            },
            supportResources: {
                title: { en: "Support Resources", hi: "समर्थन संसाधन", mr: "समर्थन संसाधने" },
                subheader: { en: "Here are personalized recommendations and resources to support you on your path to a tobacco-free life.", hi: "यहाँ तंबाकू मुक्त जीवन के आपके मार्ग पर आपका समर्थन करने के लिए व्यक्तिगत सिफारिशें और संसाधन हैं।", mr: "येथे तंबाखूमुक्त जीवनाच्या तुमच्या मार्गावर तुम्हाला मदत करण्यासाठी वैयक्तिक शिफारसी आणि संसाधने आहेत." },
                nrtRecsTitle: { en: "NRT Recommendations:", hi: "एनआरटी सिफारिशें:", mr: "एनआरटी शिफारसी:" },
                nrtRecsText: { en: "Given your %s dependence, NRTs are highly recommended. Discuss with your doctor patches, gum, lozenges, or inhalers, and consider combination therapy for better results. See full guidelines for dosages.", hi: "आपकी %s निर्भरता को देखते हुए, एनआरटी की अत्यधिक अनुशंसा की जाती है। अपने डॉक्टर से पैच, गम, लोजेंज, या इनहेलर के बारे में चर्चा करें, और बेहतर परिणामों के लिए संयोजन थेरेपी पर विचार करें। खुराक के लिए पूर्ण दिशानिर्देश देखें।", mr: "तुमच्या %s अवलंबित्वानुसार, एनआरटीची अत्यंत शिफारस केली जाते. तुमच्या डॉक्टरांशी पॅचेस, गम, लोजेंज किंवा इनहेलरबद्दल चर्चा करा आणि चांगल्या परिणामांसाठी संयोजन थेरपीचा विचार करा. डोससाठी पूर्ण मार्गदर्शक तत्त्वे पहा." },
                viewFullNRTGuidelines: { en: "View Full NRT Guidelines", hi: "पूर्ण एनआरटी दिशानिर्देश देखें", mr: "पूर्ण एनआरटी मार्गदर्शक तत्त्वे पहा" },
                physicalWellbeingTitle: { en: "Physical Well-being Exercises:", hi: "शारीरिक कल्याण व्यायाम:", mr: "शारीरिक कल्याण व्यायाम:" },
                physicalWellbeingText: { en: "Engage in light physical activity such as walking for 30 minutes daily. Deep breathing exercises (diaphragmatic breathing) can significantly improve lung capacity and reduce stress. Consider yoga or stretching for flexibility.", hi: "प्रतिदिन 30 मिनट तक टहलने जैसे हल्के शारीरिक गतिविधि में संलग्न रहें। गहरी साँस लेने के व्यायाम (डायाफ्रामिक श्वास) फेफड़ों की क्षमता में काफी सुधार कर सकते हैं और तनाव को कम कर सकते हैं। लचीलेपन के लिए योग या स्ट्रेचिंग पर विचार करें।", mr: "दररोज 30 मिनिटे चालणे यांसारख्या हलक्या शारीरिक हालचाली करा. खोल श्वासोच्छ्वास व्यायाम (डायाफ्रामिक श्वास) फुफ्फुसांची क्षमता लक्षणीयरीत्या सुधारू शकतात आणि ताण कमी करू शकतात. लवचिकतेसाठी योग किंवा स्ट्रेचिंगचा विचार करा." },
                mentalClarityTitle: { en: "Mental Clarity Techniques:", hi: "मानसिक स्पष्टता तकनीकें:", mr: "मानसिक स्पष्टता तंत्र:" },
                mentalClarityText: { en: "Practice mindfulness meditation for 10-15 minutes daily to improve focus and reduce stress. Listen to calming music, engage in hobbies, or read to divert attention from cravings. Ensure adequate sleep for mental well-being.", hi: "ध्यान केंद्रित करने और तनाव को कम करने के लिए प्रतिदिन 10-15 मिनट तक माइंडफुलनेस मेडिटेशन का अभ्यास करें। लालसा से ध्यान हटाने के लिए शांत संगीत सुनें, शौक में संलग्न हों, या पढ़ें। मानसिक स्वास्थ्य के लिए पर्याप्त नींद सुनिश्चित करें।", mr: "लक्ष्य सुधारण्यासाठी आणि ताण कमी करण्यासाठी दररोज 10-15 मिनिटे माइंडफुलनेस मेडिटेशनचा सराव करा. लालसांपासून लक्ष विचलित करण्यासाठी शांत संगीत ऐका, छंदात सहभागी व्हा किंवा वाचा. मानसिक आरोग्यासाठी पुरेशी झोप घ्या." },
                progressTrackerNav: { en: "Progress Tracker", hi: "प्रगति ट्रैकर", mr: "प्रगती ट्रॅकर" }
            },
            communityHub: {
                title: { en: "Community Hub", hi: "समुदाय हब", mr: "समुदाय केंद्र" },
                subheader: { en: "Connect with others on their quitting journey. Share your story, get support, and find encouragement.", hi: "अपनी छोड़ने की यात्रा पर दूसरों से जुड़ें। अपनी कहानी साझा करें, समर्थन प्राप्त करें, और प्रोत्साहन खोजें।", mr: "तुमच्या सोडण्याच्या प्रवासात इतरांशी कनेक्ट व्हा. तुमची कथा सामायिक करा, समर्थन मिळवा आणि प्रोत्साहन शोधा." },
                testimonialsLabel: { en: "Testimonials", hi: "प्रशंसापत्र", mr: "प्रशंसापत्र" },
                anilKTestimonial: { en: "\"Uday Kiran helped me quit after 15 years. The daily focus and craving distractions were lifesavers!\"", hi: "\"उदय किरण ने मुझे 15 साल बाद छोड़ने में मदद की। दैनिक ध्यान और लालसा विचलित करने वाले जीवनरक्षक थे!\"", mr: "\"उदय किरणने मला 15 वर्षांनंतर सोडण्यास मदत केली. दैनंदिन लक्ष आणि लालसा विचलित करणारे जीवनरक्षक होते!\"" },
                priyaSTestimonial: { en: "\"The progress tracker kept me motivated. Seeing the money saved was a huge incentive!\"", hi: "\"प्रगति ट्रैकर ने मुझे प्रेरित रखा। बचाए गए पैसे देखकर एक बड़ा प्रोत्साहन मिला!\"", mr: "\"प्रगती ट्रॅकरने मला प्रेरित ठेवले. वाचलेले पैसे पाहून खूप प्रोत्साहन मिळाले!\"" },
                shareStoryBtn: { en: "Share Your Story", hi: "अपनी कहानी साझा करें", mr: "तुमची कथा सामायिक करा" },
                anonymousGroupSessionsLabel: { en: "Anonymous Group Sessions", hi: "गुमनाम समूह सत्र", mr: "अनामित गट सत्रे" },
                anonymousGroupSessionsSubheader: { en: "Join live, anonymous group sessions for support and shared experiences.", hi: "समर्थन और साझा अनुभवों के लिए लाइव, गुमनाम समूह सत्रों में शामिल हों।", mr: "समर्थन आणि सामायिक अनुभवांसाठी थेट, अनामित गट सत्रांमध्ये सामील व्हा." },
                joinSessionBtn: { en: "Join a Session", hi: "एक सत्र में शामिल हों", mr: "एक सत्रात सामील व्हा" },
                communityNav: { en: "Community", hi: "समुदाय", mr: "समुदाय" }
            },
            resourceCenter: {
                title: { en: "Resource Center", hi: "संसाधन केंद्र", mr: "संसाधन केंद्र" },
                subheader: { en: "Access valuable information and tools to further empower your journey. Explore these resources at your convenience.", hi: "अपनी यात्रा को और सशक्त बनाने के लिए मूल्यवान जानकारी और उपकरण प्राप्त करें। अपनी सुविधानुसार इन संसाधनों का अन्वेषण करें।", mr: "तुमचा प्रवास अधिक सक्षम करण्यासाठी मौल्यवान माहिती आणि साधनांपर्यंत पोहोचा. तुमच्या सोयीनुसार ही संसाधने एक्सप्लोर करा." },
                returnToHome: { en: "Return to Home", hi: "होम पर वापस", mr: "घरी परत जा" }
            },
            // Common messages
            pleaseSelectDate: { en: "Please select a quit date.", hi: "कृपया छोड़ने की तारीख चुनें।", mr: "कृपया सोडण्याची तारीख निवडा." },
            pleaseSelectAnswer: { en: "Please select an answer before proceeding.", hi: "आगे बढ़ने से पहले कृपया एक उत्तर चुनें।", mr: "पुढे जाण्यापूर्वी कृपया एक उत्तर निवडा." },
            pleaseAnswerAllQuestions: { en: "Please answer all questions before submitting.", hi: "कृपया सबमिट करने से पहले सभी प्रश्नों का उत्तर दें।", mr: "कृपया सबमिट करण्यापूर्वी सर्व प्रश्नांची उत्तरे द्या." },
            noSupportersAdded: {en: "No supporters added yet.", hi: "अभी तक कोई समर्थक नहीं जोड़ा गया है।", mr: "अद्याप कोणताही समर्थक जोडलेला नाही."},
            noDangerTimesAdded: {en: "No danger times added yet.", hi: "अभी तक कोई खतरनाक समय नहीं जोड़ा गया है।", mr: "अद्याप कोणतीही धोक्याची वेळ जोडलेली नाही."},
            setQuitDateToTrack: {en: "Set your quit date to track your progress.", hi: "अपनी प्रगति को ट्रैक करने के लिए अपनी छोड़ने की तारीख निर्धारित करें।", mr: "तुमची प्रगती तपासण्यासाठी तुमची सोडण्याची तारीख निश्चित करा."},
            journeyStartedOn: {en: "🗓️ Your journey started on %s. You are doing great!", hi: "🗓️ आपकी यात्रा %s को शुरू हुई। आप बहुत अच्छा कर रहे हैं!", mr: "🗓️ तुमचा प्रवास %s रोजी सुरू झाला. तुम्ही खूप छान करत आहात!"}
        };

        function getTranslatedText(key, lang = currentLanguage) {
            return translations[key]?.[lang] || translations[key]?.['en'] || key;
        }

        function translatePage(lang) {
            document.querySelectorAll('[data-en]').forEach(el => {
                const text = el.getAttribute(`data-${lang}`) || el.getAttribute('data-en');
                if (text) {
                    const icon = el.querySelector('i');
                    if (icon) {
                        const tempDiv = document.createElement('div');
                        tempDiv.innerHTML = text;
                        if (icon) {
                            tempDiv.appendChild(icon.cloneNode(true));
                        }
                        el.innerHTML = tempDiv.innerHTML;
                    } else {
                        el.innerHTML = text;
                    }
                }
            });
            // Update specific elements that are dynamically generated or require special handling
            const activeScreen = document.querySelector('.card-container.current-screen');
            if(activeScreen?.id === 'fagerstromTest') {
                showFagerstromQuestion(currentFagerstromQuestion);
            }
            if(activeScreen?.id === 'healthOverviewScreen') {
                generateHealthOverview();
            }
            if(activeScreen?.id === 'nrtGuidelinesScreen') {
                renderNRTGuidelines();
            }
            if(activeScreen?.id === 'supportResourcesScreen') {
                renderSupportResources();
            }
            if(activeScreen?.id === 'progressTracker') {
                updateProgressTracker();
            }
            if(activeScreen?.id === 'dangerTimesCravingsScreen') {
                renderDangerTimes();
                getNewDistractionIdea(true); // Re-render current idea on language change
            }
            if(activeScreen?.id === 'dailyFocusScreen') {
                // If focus was already generated, re-render it
                const focusDisplay = document.getElementById('dailyFocusDisplay');
                if (focusDisplay.style.display !== 'none') {
                    const latestLog = dailyLog[dailyLog.length - 1];
                    if (latestLog) {
                        document.getElementById('focusText').textContent = latestLog.focus[currentLanguage];
                    }
                }
            }


            // Update header title
            document.querySelector('title').textContent = translations.title[lang] || translations.title.en;
            document.querySelector('.header span').textContent = translations.appName[lang] || translations.appName.en;
        }

        document.querySelectorAll('.lang-button').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.lang-button').forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                currentLanguage = button.getAttribute('data-lang');
                translatePage(currentLanguage);
            });
        });

        function showScreen(screenId) {
            screens.forEach(id => {
                const screen = document.getElementById(id);
                if (screen) {
                    screen.classList.remove('current-screen');
                    screen.style.display = 'none'; // Ensure it's hidden
                }
            });
            const activeScreen = document.getElementById(screenId);
            if (activeScreen) {
                activeScreen.style.display = 'flex'; // Display the screen
                setTimeout(() => {
                    activeScreen.classList.add('current-screen');
                }, 10); // Small delay to allow display:flex to apply before animation
            }

            // Update stepper for the current screen if applicable
            updateStepper(screenId);
            // Translate content for the new screen
            translatePage(currentLanguage);

            // Special rendering for specific screens
            if (screenId === 'progressTracker') {
                updateProgressTracker();
            } else if (screenId === 'nrtGuidelinesScreen') {
                renderNRTGuidelines();
            } else if (screenId === 'supportResourcesScreen') {
                renderSupportResources();
            } else if (screenId === 'supportSystemScreen') {
                renderSupporters();
            } else if (screenId === 'dangerTimesCravingsScreen') {
                renderDangerTimes();
                getNewDistractionIdea();
            } else if (screenId === 'dailyFocusScreen') {
                document.getElementById('dailyFocusDisplay').style.display = 'none'; // Hide focus until generated
            }
        }
        
        function setQuitDate() {
            const dateInput = document.getElementById('quitDateInput');
            if (dateInput.value) {
                quitDate = new Date(dateInput.value);
                showScreen('goalsMotivationsScreen'); // Navigate to goals and motivations
            } else {
                alert(getTranslatedText('pleaseSelectDate'));
            }
        }

        function toggleMotivation(motivation) {
            const index = selectedMotivations.indexOf(motivation);
            if (index > -1) {
                selectedMotivations.splice(index, 1);
            } else {
                selectedMotivations.push(motivation);
            }
            // Update UI
            document.querySelectorAll('.motivation-option').forEach(optionDiv => {
                if (selectedMotivations.includes(optionDiv.getAttribute('data-motivation'))) {
                    optionDiv.classList.add('selected');
                } else {
                    optionDiv.classList.remove('selected');
                }
            });
        }

        function saveGoalsMotivations() {
            currentUser.mainGoal = document.getElementById('mainGoalInput').value;
            currentUser.motivations = selectedMotivations;
            currentUser.otherMotivations = document.getElementById('otherMotivationsInput').value;
            showScreen('supportSystemScreen');
        }

        function addSupporter() {
            const name = document.getElementById('supporterNameInput').value;
            const contact = document.getElementById('supporterContactInput').value;
            if (name) {
                supporters.push({ name, contact });
                document.getElementById('supporterNameInput').value = '';
                document.getElementById('supporterContactInput').value = '';
                renderSupporters();
            } else {
                alert(getTranslatedText('pleaseEnterSupporterName')); // Add this translation key
            }
        }

        function renderSupporters() {
            const supportersListDiv = document.getElementById('supportersList');
            if (supporters.length === 0) {
                supportersListDiv.innerHTML = `<div class="text-gray-500" id="noSupportersMessage">${getTranslatedText('noSupportersAdded')}</div>`;
            } else {
                supportersListDiv.innerHTML = supporters.map((s, index) => `
                    <div class="list-item">
                        <div class="list-item-content">
                            <strong>${s.name}</strong>
                            ${s.contact ? `<span>${s.contact}</span>` : ''}
                        </div>
                        <button class="list-item-remove" onclick="removeSupporter(${index})"><i class="fa-solid fa-times-circle"></i></button>
                    </div>
                `).join('');
            }
        }

        function removeSupporter(index) {
            supporters.splice(index, 1);
            renderSupporters();
        }

        function addDangerTime() {
            const dangerTimeText = document.getElementById('dangerTimeInput').value;
            if (dangerTimeText) {
                dangerTimes.push(dangerTimeText);
                document.getElementById('dangerTimeInput').value = '';
                renderDangerTimes();
            } else {
                alert(getTranslatedText('pleaseEnterDangerTime')); // Add this translation key
            }
        }

        function renderDangerTimes() {
            const dangerTimesListDiv = document.getElementById('dangerTimesList');
            if (dangerTimes.length === 0) {
                dangerTimesListDiv.innerHTML = `<div class="text-gray-500" id="noDangerTimesMessage">${getTranslatedText('noDangerTimesAdded')}</div>`;
            } else {
                dangerTimesListDiv.innerHTML = dangerTimes.map((dt, index) => `
                    <div class="list-item">
                        <div class="list-item-content">
                            <span>${dt}</span>
                        </div>
                        <button class="list-item-remove" onclick="removeDangerTime(${index})"><i class="fa-solid fa-times-circle"></i></button>
                    </div>
                `).join('');
            }
        }

        function removeDangerTime(index) {
            dangerTimes.splice(index, 1);
            renderDangerTimes();
        }

        function getNewDistractionIdea(isLanguageChange = false) {
            const ideaElement = document.getElementById('distractionIdea').querySelector('p');
            if (!ideaElement) return;

            if (isLanguageChange) {
                ideaElement.textContent = distractionIdeas[currentDistractionIdeaIndex][currentLanguage] || distractionIdeas[currentDistractionIdeaIndex].en;
            } else {
                currentDistractionIdeaIndex = (currentDistractionIdeaIndex + 1) % distractionIdeas.length;
                ideaElement.textContent = distractionIdeas[currentDistractionIdeaIndex][currentLanguage] || distractionIdeas[currentDistractionIdeaIndex].en;
            }
        }

        function saveReminderPreferences() {
            currentUser.emailReminder = document.getElementById('emailReminderInput').value;
            currentUser.phoneReminder = document.getElementById('phoneReminderInput').value;
            alert(getTranslatedText('remindersSaved')); // Add this translation key: "Reminders saved!"
        }

        function generateDailyFocus() {
            const smokedYesterday = parseInt(document.getElementById('cigarettesSmokedYesterday').value, 10);
            if (isNaN(smokedYesterday)) {
                alert(getTranslatedText('pleaseEnterCigarettesCount')); // Add this translation key
                return;
            }

            const today = new Date().toISOString().slice(0, 10);
            const existingLogIndex = dailyLog.findIndex(log => log.date === today);

            let focusText = '';
            let targetCigarettes = 0;

            if (nicotineDependenceLevel === 'high') {
                targetCigarettes = Math.max(0, smokedYesterday - 3); // Aim to reduce by 3 for high dependence
            } else if (nicotineDependenceLevel === 'moderate') {
                targetCigarettes = Math.max(0, smokedYesterday - 2); // Aim to reduce by 2 for moderate
            } else {
                targetCigarettes = Math.max(0, smokedYesterday - 1); // Aim to reduce by 1 for low
            }

            focusText = getTranslatedText('dailyFocus.goodEffort') + ' ' +
                        getTranslatedText('dailyFocus.todaysFocus') + ' ' +
                        getTranslatedText('dailyFocus.targetReduce').replace('%s', targetCigarettes) + ' ' +
                        getTranslatedText('dailyFocus.implementDistraction');
            
            const focusEntry = {
                date: today,
                cigarettes: smokedYesterday,
                focus: {
                    en: focusText,
                    hi: translations.dailyFocus.goodEffort.hi + ' ' + translations.dailyFocus.todaysFocus.hi + ' ' + translations.dailyFocus.targetReduce.hi.replace('%s', targetCigarettes) + ' ' + translations.dailyFocus.implementDistraction.hi,
                    mr: translations.dailyFocus.goodEffort.mr + ' ' + translations.dailyFocus.todaysFocus.mr + ' ' + translations.dailyFocus.targetReduce.mr.replace('%s', targetCigarettes) + ' ' + translations.dailyFocus.implementDistraction.mr
                }
            };

            if (existingLogIndex > -1) {
                dailyLog[existingLogIndex] = focusEntry;
            } else {
                dailyLog.push(focusEntry);
            }

            document.getElementById('focusText').textContent = focusEntry.focus[currentLanguage];
            document.getElementById('dailyFocusDisplay').style.display = 'block';
        }


        function showFagerstromQuestion(questionIndex) {
            currentFagerstromQuestion = questionIndex;
            const questionData = fagerstromQuestions[questionIndex];
            if (!questionData) return;

            document.getElementById('fagerstromQuestion').textContent = questionData.question[currentLanguage];
            const optionsContainer = document.getElementById('fagerstromOptions');
            optionsContainer.innerHTML = '';

            questionData.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.classList.add('answer-option');
                if (fagerstromAnswers[questionIndex] === option.score) {
                    optionDiv.classList.add('selected');
                }
                optionDiv.textContent = option[currentLanguage];
                optionDiv.onclick = () => selectFagerstromAnswer(index, option.score);
                optionsContainer.appendChild(optionDiv);
            });

            document.getElementById('fagerstromPrevBtn').style.display = questionIndex > 0 ? 'inline-flex' : 'none';
            document.getElementById('fagerstromNextBtn').style.display = questionIndex < fagerstromQuestions.length - 1 ? 'inline-flex' : 'none';
            document.getElementById('fagerstromSubmitBtn').style.display = questionIndex === fagerstromQuestions.length - 1 && fagerstromAnswers[questionIndex] !== null ? 'inline-flex' : 'none';
            
            if (questionIndex === fagerstromQuestions.length - 1 && fagerstromAnswers[questionIndex] !== null) {
                document.getElementById('fagerstromSubmitBtn').style.display = 'inline-flex';
            } else {
                document.getElementById('fagerstromSubmitBtn').style.display = 'none';
            }

            updateStepper('fagerstromTest');
        }

        function selectFagerstromAnswer(optionIndex, score) {
            fagerstromAnswers[currentFagerstromQuestion] = score;
            const optionsContainer = document.getElementById('fagerstromOptions');
            Array.from(optionsContainer.children).forEach((child, idx) => {
                if (idx === optionIndex) {
                    child.classList.add('selected');
                } else {
                    child.classList.remove('selected');
                }
            });

            if (currentFagerstromQuestion === fagerstromQuestions.length - 1) {
                document.getElementById('fagerstromSubmitBtn').style.display = 'inline-flex';
            }
        }

        function prevFagerstromQuestion() {
            if (currentFagerstromQuestion > 0) {
                showFagerstromQuestion(currentFagerstromQuestion - 1);
            }
        }

        function nextFagerstromQuestion() {
            if (fagerstromAnswers[currentFagerstromQuestion] === null) {
                alert(getTranslatedText('pleaseSelectAnswer'));
                return;
            }
            if (currentFagerstromQuestion < fagerstromQuestions.length - 1) {
                showFagerstromQuestion(currentFagerstromQuestion + 1);
            }
        }

        function calculateFagerstromScore() {
            if (fagerstromAnswers.includes(null)) {
                alert(getTranslatedText('pleaseAnswerAllQuestions'));
                return;
            }
            fagerstromScore = fagerstromAnswers.reduce((sum, score) => sum + score, 0);
            determineNicotineDependenceLevel();
            showScreen('healthOverviewScreen');
        }

        function determineNicotineDependenceLevel() {
            if (fagerstromScore >= 7) {
                nicotineDependenceLevel = 'high';
            } else if (fagerstromScore >= 4) {
                nicotineDependenceLevel = 'moderate';
            } else {
                nicotineDependenceLevel = 'low';
            }
        }

        function generateHealthOverview() {
            const levelDisplay = document.getElementById('dependenceLevelDisplay');
            const adviceDisplay = document.getElementById('dependenceAdvice');
            const scoreDisplay = document.getElementById('fagerstromScoreDisplay');

            let levelText = '';
            let adviceText = '';

            if (nicotineDependenceLevel === 'high') {
                levelText = getTranslatedText('highDependence');
                adviceText = getTranslatedText('highDependenceAdvice');
            } else if (nicotineDependenceLevel === 'moderate') {
                levelText = getTranslatedText('moderateDependence');
                adviceText = getTranslatedText('moderateDependenceAdvice');
            } else {
                levelText = getTranslatedText('lowDependence');
                adviceText = getTranslatedText('lowDependenceAdvice');
            }
            
            levelDisplay.textContent = levelText;
            adviceDisplay.innerHTML = adviceText;
            scoreDisplay.textContent = `${getTranslatedText('overallImpact')}: ${fagerstromScore} ${getTranslatedText('fagerstromScoreLabel')}`;
        }

        function updateProgressTracker() {
            if (!quitDate) {
                document.getElementById('daysFree').textContent = 'N/A';
                document.getElementById('hoursFree').textContent = 'N/A';
                document.getElementById('minutesFree').textContent = 'N/A';
                document.getElementById('moneySaved').textContent = 'N/A';
                document.getElementById('journeyLog').innerHTML = `<div class="bg-white p-3 rounded-md shadow-sm text-sm">${getTranslatedText('setQuitDateToTrack')}</div>`;
                return;
            }
            const now = new Date();
            const timeDiff = now.getTime() - quitDate.getTime();
            const days = Math.max(0, Math.floor(timeDiff / (1000 * 60 * 60 * 24)));
            const hours = Math.max(0, Math.floor(timeDiff / (1000 * 60 * 60)));
            const minutes = Math.max(0, Math.floor(timeDiff / (1000 * 60)));

            document.getElementById('daysFree').textContent = days;
            document.getElementById('hoursFree').textContent = hours;
            document.getElementById('minutesFree').textContent = minutes;
            
            const cigarettesPerDay = (fagerstromAnswers[3] !== null ? (fagerstromAnswers[3] + 1) * 10 - 5 : 10);
            const moneySaved = days * cigarettesPerDay * 15;
            document.getElementById('moneySaved').textContent = `₹${moneySaved.toLocaleString()}`;
            
            const journeyLogDiv = document.getElementById('journeyLog');
            journeyLogDiv.innerHTML = ''; // Clear previous log
            
            // Add static journey start message
            const journeyStartText = getTranslatedText('journeyStartedOn').replace('%s', quitDate.toLocaleDateString(currentLanguage));
            journeyLogDiv.innerHTML += `<div class="bg-white p-3 rounded-md shadow-sm text-sm mb-2">${journeyStartText}</div>`;

            // Display daily log entries
            if (dailyLog.length > 0) {
                dailyLog.sort((a, b) => new Date(b.date) - new Date(a.date)); // Sort by date descending
                dailyLog.forEach(entry => {
                    const logEntryDiv = document.createElement('div');
                    logEntryDiv.classList.add('bg-white', 'p-3', 'rounded-md', 'shadow-sm', 'text-sm', 'mb-2');
                    const entryDate = new Date(entry.date).toLocaleDateString(currentLanguage);
                    logEntryDiv.innerHTML = `
                        <p class="font-semibold text-gray-800">${entryDate}</p>
                        <p>${getTranslatedText('dailyFocus.smokedYesterdayLabel')}: ${entry.cigarettes}</p>
                        <p>${getTranslatedText('dailyFocus.todaysFocus')} ${entry.focus[currentLanguage]}</p>
                    `;
                    journeyLogDiv.appendChild(logEntryDiv);
                });
            } else {
                 journeyLogDiv.innerHTML += `<div class="bg-white p-3 rounded-md shadow-sm text-sm">${getTranslatedText('noDailyLogEntries')}</div>`; // Add this translation
            }

        }
        
        function updateStepper(screenId) {
            let stepperId = '';
            let totalSteps = 0;
            let currentStep = -1;

            if (screenId === 'fagerstromTest') {
                stepperId = 'fagerstromStepper';
                totalSteps = fagerstromQuestions.length;
                currentStep = currentFagerstromQuestion;
            } else if (screenId === 'progressTracker') {
                stepperId = 'progressTrackerTopStepper';
                totalSteps = 3; // Example: Quit Date, Dependence, Progress
                // This is a simplified stepper for progress tracker, not tied to questions
                if (quitDate) currentStep = 0;
                if (nicotineDependenceLevel) currentStep = 1;
                if (document.getElementById('daysFree').textContent !== '0') currentStep = 2; // Arbitrary condition for last step
            } else {
                return; // No stepper for other screens
            }

            const stepperContainer = document.getElementById(stepperId);
            if (!stepperContainer) return;

            stepperContainer.innerHTML = ''; // Clear existing steps

            for (let i = 0; i < totalSteps; i++) {
                const stepCircle = document.createElement('div');
                stepCircle.classList.add('step-circle');
                if (i <= currentStep) {
                    stepCircle.classList.add('active'); // Mark current and previous steps as active/completed
                }
                stepCircle.textContent = i + 1;
                stepperContainer.appendChild(stepCircle);
            }
        }

        function renderNRTGuidelines() {
            const tableBody = document.getElementById('nrtGuidelinesTableBody');
            if (!tableBody) return;

            tableBody.innerHTML = ''; // Clear existing content

            const nrtData = translations.nrtGuidelines.data;
            nrtData.forEach(item => {
                const row = document.createElement('tr');
                row.classList.add('border-b');

                const levelCell = document.createElement('td');
                levelCell.classList.add('py-3', 'px-4', 'text-sm', 'text-gray-700', 'font-medium');
                levelCell.textContent = item.level[currentLanguage] || item.level.en;
                row.appendChild(levelCell);

                const dosageCell = document.createElement('td');
                dosageCell.classList.add('py-3', 'px-4', 'text-sm', 'text-gray-700');
                dosageCell.textContent = item.dosage[currentLanguage] || item.dosage.en;
                row.appendChild(dosageCell);

                const combinationCell = document.createElement('td');
                combinationCell.classList.add('py-3', 'px-4', 'text-sm', 'text-gray-700');
                combinationCell.textContent = item.combination[currentLanguage] || item.combination.en;
                row.appendChild(combinationCell);

                tableBody.appendChild(row);
            });
        }

        function renderSupportResources() {
            const nrtRecsTextElement = document.getElementById('nrtRecommendationsText');
            if (nrtRecsTextElement) {
                let nrtText = translations.supportResources.nrtRecsText[currentLanguage];
                if (nicotineDependenceLevel) {
                    const dependenceTranslation = translations[`${nicotineDependenceLevel}Dependence`][currentLanguage] || translations[`${nicotineDependenceLevel}Dependence`].en;
                    nrtText = nrtText.replace('%s', dependenceTranslation);
                } else {
                    nrtText = nrtText.replace('%s', translations.general[currentLanguage] || "your"); // Fallback if dependence not set
                }
                nrtRecsTextElement.textContent = nrtText;
            }
        }
        
        // Add more translation keys for new alert messages
        translations.pleaseEnterSupporterName = { en: "Please enter supporter's name.", hi: "कृपया समर्थक का नाम दर्ज करें।", mr: "कृपया समर्थकाचे नाव प्रविष्ट करा." };
        translations.pleaseEnterDangerTime = { en: "Please enter a danger time.", hi: "कृपया एक खतरनाक समय दर्ज करें।", mr: "कृपया धोक्याची वेळ प्रविष्ट करा." };
        translations.remindersSaved = { en: "Reminders saved!", hi: "अनुस्मारक सहेजे गए!", mr: "स्मरणपत्रे जतन केली!" };
        translations.pleaseEnterCigarettesCount = { en: "Please enter the number of cigarettes smoked.", hi: "कृपया पी गई सिगरेट की संख्या दर्ज करें।", mr: "कृपया प्यालेल्या सिगारेटची संख्या प्रविष्ट करा." };
        translations.noDailyLogEntries = { en: "No daily log entries yet. Generate today's focus to start logging!", hi: "अभी तक कोई दैनिक लॉग प्रविष्टियां नहीं हैं। लॉगिंग शुरू करने के लिए आज का ध्यान उत्पन्न करें!", mr: "अद्याप कोणतीही दैनिक लॉग नोंदी नाहीत. लॉगिंग सुरू करण्यासाठी आजचे लक्ष निर्माण करा!" };


        document.addEventListener('DOMContentLoaded', () => {
            showScreen('welcomeScreen');
            translatePage(currentLanguage);
            // Initialize distraction idea on load
            getNewDistractionIdea(true);
        });
    </script>
</body>
</html>
